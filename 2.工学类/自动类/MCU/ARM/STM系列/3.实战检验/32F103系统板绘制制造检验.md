

## 前言

相信很多初学者都是通过购买和使用别人的开发板进行学习。如果能自己动手制作一块开发板，不仅成就感满满，还能学到非常多的知识！水平有限，如有错漏之处，敬请指正。

---
## 学习目标

- 了解 使用嘉立创进行原理图设计的流程

- 了解    使用立创EDA进行PCB设计的流程
- 能够熟练    进行元器件的布局操作
- 能够熟练    进行PCB的布线操作
- 能够使用    立创EDA完成STM32核心板的PCB设计
## 一、准备工作

1. EDA的选择：一般专业的工程开发都是使用Altium Designer、Cadence等等这些比较专业的EDA软件。但考虑到这些软件的上手难度比较高、使用过程比较复杂，对于初学者或者爱好者来说并不是非常友好。我这里推荐和使用的立创EDA，使用网页即可进行开发，上手难度大大降低；
2. 元器件的购买：在PCB板制作完成后需要焊接元器件，所以要关注相应的元器件的**购买渠道、价格**等等方面。
3. 主要步骤：**1 绘制原理图；2 绘制PCB文件；3 提交文件给厂家制板、焊接元件。**

## 二、前置知识

一般工程包括**原理图**和**PCB**制版文件。

### 1.[原理图](https://so.csdn.net/so/search?q=%E5%8E%9F%E7%90%86%E5%9B%BE&spm=1001.2101.3001.7020)

原理图只关注元器件之间的**电气连接，也就是元器件之间该如何连接电路线**。所以，原理图的绘制只是将元器件的管脚连接起来即可。剩下的实际电路板制作交给PCB绘制。

### 2.PCB文件

PCB文件决定了**实际电路板的形状如何、元器件如何摆放、元器件之间的连接线如何走线等等，而元器件之间的连线是根据原理图生成的。**

### 3.元器件封装

元器件封装是指**元器件的形状、大小、管脚间距等等信息**。注意，**相同的元器件可能有不同的封装类型！如下图：相同阻值的电阻有不同封装，其实际大小不相同；一种芯片可以有不同形状的封装，但功能完全相同。** 

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/353786093578b72cc3500cdd027ca201.png)



>Ps：注意并不是集成度越高越好，这是一个误区，**原型开发阶段**其实用分立元件更好，在验证完原型后在提高元件的集成度使用贴片元件较好



## 三、绘制原理图

新建好工程以后，即可在原理图上放置元器件。如下：

1. 在原理图空白处点击右键；
2. 放置元件；
3. 搜索要放置的元器件，注意**封装信息**；
4. 点击放置，即可放置元件在原理图上。  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/616cf895c9885c2c4a0abc0033a98c89.png)

### 1.电源部分

一般为了方便使用，板子上都有带有一个USB接口。但USB供电电压一般为5V，而STM32所需电源为3.3V。所以要用到**线性稳压器**，将供电电压从5V降到3.3V。最多使用的稳压器芯片是AMS1117，但ME6211C的封装更小，所以选择ME6211C33M5G作为稳压器，典型应用电路如下：  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9f04f41805fcfe566df297d89fd8b239.png)  
于是就依葫芦画瓢，把USB插座和ME6211C连接上。另外STM32也有USB外设，但因为较少用到，所以为了简化电路，USB的D+、D-管脚就不进行连接了，有需要的可以进一步自行了解。电源和地之间的电容主要作用是**滤除噪声和交流成分、抗窄尖脉冲，使其接近理想电源**，特别是芯片的模拟电源部分。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/59765821f9a5f266c7682057aae38585.png)



#### 1.  绘制原则



#### 2. 优秀案例




#### 4. 失败案例







#### 4. 实操上手


### 2.晶振电路

由于stm32内置的振荡器的精确度不高，使用外部晶振可以提供更精确的时钟。外部晶体振荡器分为两个：8MHz和32.768kHz。8MHz的晶体振荡器为高速时钟，为CPU提供准确的时钟频率；32.768kHz刚好是2的15次方，**经过2的15次方分频后产生1秒的方波脉冲，用于计时**。以下为官方手册提供的典型电路，电容CL1和CL2典型值是5-25pF和5-15pF。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/4a8228f56ac4da52092ee218bcaf929e.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b801b1d4c8ae2b5e995dd759bc8eafe2.png)  
以下为实际的原理图部分  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ae5bffad92e543f61c9f0b13e99d17b7.png)


#### 1. 元件摆放




#### 2. 元件连线



#### 3. 参考案例

**优秀案例**






**失败案例**




#### 4. 实操上手



### 3.复位和启动方式

STM32F103一共有三种启动模式，如下图：

- Flash启动模式：一般使用JTAG或者SWD下载的程序都存储在这里，重启设备后从这里启动程序；
- 系统存储器：内置厂家设置的引导程序，出厂后无法修改。这里提供串口下载的固件，通过串口把程序下载Flash中；
- 内置SRAM：用于调试程序，调试好后再下载到Flash中，**掉电后数据丢失**。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a14422b54e817ce9182b3ccfc12c3f5d.png)  
通过排针和跳线帽选择BOOT0和BOOT1的电平，决定启动方式；当然，也可直接将BOOT0通过串联一个电阻接地，默认从Flash启动，也可满足一般需要。  



![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3db6078e683af6f0871767aeb5a3fd43.png)

复位电路参照的是官方文档，电容作用是使复位引脚在上电后**仍然保持一段时间的低电平**，进行上电后的复位。




#### 1. 元件摆放




#### 2. 元件连线



#### 3. 参考案例

**优秀案例**






**失败案例**




#### 4. 实操上手

### 4.下载电路


#### 1. 元件摆放

#### 2. 元件连线

- 差分信号线一等长分布

#### 3. 参考案例
**优秀案例**






**失败案例**




#### 4. 实操上手


建议使用JTAG的SWD模式下载，相较于使用USB转串口的ISP下载方式方便很多（使用此方式要设置BOOT模式，上文有介绍）。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/17a744a8bdab186203d9341f2cb95f46.png)

### 5.排针引出和LED指示




#### 1. 元件摆放




#### 2. 元件连线



#### 3. 参考案例

**优秀案例**






**失败案例**




#### 4. 实操上手

按照芯片的引脚位置合理地引出到开发板的两侧排针，如下：  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b24381482ce09197a807518528254c19.png)

放置两个LED，用于电源指示和IO口的指示。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7a1985c81c94c38254f1abf38279c2dd.png)

### 6.各部分与主芯片的连接



#### 1. 元件摆放




#### 2. 元件连线



#### 3. 参考案例

**优秀案例**






**失败案例**




#### 4. 实操上手

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/93c8532535ef9d0d098432108446730e.png)

## 四、绘制PCB板图

	引言:在设计好原理图后，我们需要进一步朝着能够制造它的方向靠近，即设计Layout布局，这一步很关键，往往分原型PCB和生产PCB两个角度去考虑

### 0. 明确产品阶段


- **设计阶段处于原型验证阶段还是生产阶段**
	之所以此项最优先考虑，是因为本人在一开始认为一切合理，使用的都是贴片元件，少见直插元件，且不考虑设计验证功能的裸露触点，以及热插拔式MCU等用来辅助原型设计阶段的PCB验证设计方法。若你处于原型验证阶段，依次考虑以下设计
		1. 




### 1. 设计流程

这个流程还是很重要的，基本的操作都是按照这里来的！

![](https://i-blog.csdnimg.cn/blog_migrate/0c53a1e5cdc9d8db64dbe843d30ea7db.png)








###  2. 规则设置

-  设计规则的单位跟随画布属性里设置的单位，此处单位是mil。
- 导线**线宽最小为10mil；**
- **不同网络元素之间最小间距为8mil；**
- **孔外径为24mil**，**孔内径为12mil；**
- 线长不做设置；
- 在PCB设计过程中，都要**开启“实时规则检测”**、**“检测元素到覆铜的距离”和“在布线时显示DRC安全边界”功能。

### 3. 布局规则

布局一般要遵守以下原则：

（1）**布线最短原则**。例如，集成电路（IC）的**去耦电容应尽量放置在相应的VCC和GND引脚之间，且距离IC尽可能近**，使之与VCC和GND之间形成的回路最短。

（2）将**同一功能模块集中**原则。即实现同一功能的相关电路模块中的元器件就近集中布局。

（3）遵守“**先大后小，先难后易**”的原则，即重要的单元电路、核心元器件应优先布局。

（4）布局中应参考原理图，根据电路的**主信号流向规律**安排主要元器件。

（5）元器件的排列要**便于调试和维修**，即小元器件周围不能放置大元器件，需调试的元器件周围要有足够的空间。

（6）**同类型插件元器件在X或Y方向上应朝一个方向放置**。同一种类型的有极性分立元器件也要尽量在X或Y方向上保持一致，便于生产和检验。

（7）布局时，位于电路板边缘的元器件**，离电路板边缘一般不小于2mm**，如果空间允许，建议距离保持在5mm。

（8）布局**晶振**时，应尽量**靠近IC**，且与**晶振相连的电容要紧邻晶振**。

### 4. 正式布线

布线时应注意以下事项：

（1）**电源主干线原则上要加粗**（尤其是电路板的电源输入/输出线）。

（2）**PCB布线不要距离定位孔和电路板边框太近**，否则在进行PCB钻孔加工时，导线很容易被切掉一部分甚至被切断。

（3）**同一层禁止90°拐角布线**，但是**不同层之间过孔90°布线是允许**的。而且，布线时尽可能遵守一层水平布线，另一层垂直走线的原则。

（4）**高频信号线**，如STM32核心板上的晶振电路的布线，**不要加粗**，建议也按照线宽为10mil进行设计，而且尽可能布线在同一层。

#### （1）原理图转PCB

![](https://i-blog.csdnimg.cn/blog_migrate/df9ff0787b1106b850f57535500742ec.png)




#### （2）设计板子尺寸

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2b952e0459cce958108a4adb6e27f0ab.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/dca49a83525d70ced185456550b54839.png)




#### （3）元器件布局 



##### 1）布局原则

将元器件摆放到板子范围内，摆放位置尽量合理、美观。大致布局如下，稍后走线时可能需要稍微调整一下。  

![](https://i-blog.csdnimg.cn/blog_migrate/c5bfca28648b8ce8734519410e32ed87.png)

![](https://i-blog.csdnimg.cn/blog_migrate/4c3fbbed03b72a538e7a572e5ba3a63a.png)

（我这边已经是布局好的^……^）




![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ba39c1ee24d69b37314177785410337e.png)
										图：其他人的布局




##### 2）布局顺序




##### 3）优秀案例



##### 4）失败案例



##### 5）实操上手
####  （4）元器件布线


##### 1）原则


**建议事项**


**禁止事项**
- 禁止在元器件焊盘上打通孔
- 









##### 2）顺序

###### 引脚排针端子


- 固定孔放置
- 端子放置
- 排针放置
- 引脚放置

![](https://i-blog.csdnimg.cn/blog_migrate/b6f2ed43283393d28d372702ca029577.png)

###### 电源模块布线

**摆放原则**
- MCU近端放置一大一小两容量不同的去耦电容
- 


**布线原则**
- 电源线尽可能粗：防止因为负载过大导致电平被拉低




![](https://i-blog.csdnimg.cn/blog_migrate/7480b5b80962a1d36c0447f8434862c5.png)








**操作认知**


1. **十字通孔焊盘+双面GND增加电流回流路径**

![1733330429205.png](https://www.helloimg.com/i/2024/12/05/6750849c8bee5.png)
											图：正面GND网络


![1733330443383.png](https://www.helloimg.com/i/2024/12/05/675084aac4bcb.png)
											图：反面GND网络

>**解释**：通过这种方法增加了GND的回流有效面积，从而提升了电源电路的载荷能力，且此种连接方式属于焊盘十字连接至铺铜，操作教程见[LCEDA如何设置器件十字覆铜，过孔直接覆铜，覆铜优先级设置 ](https://club.szlcsc.com/article/details_51383_1.html)
>**问题**：
>	1. 嘉立创十字焊盘重建时候仅单面生效十字焊盘
>	![1733331575945.png](https://www.helloimg.com/i/2024/12/05/6750891040b63.png)
>						图：PCB正面
>	![1733331603205.png](https://www.helloimg.com/i/2024/12/05/6750892b67f79.png)
>						图：PCB反面
>

###### 独立按键模块

![](https://i-blog.csdnimg.cn/blog_migrate/b863894e017fa83e8e86259e6fbac1cb.png)

###### 调试通信接口

![](https://i-blog.csdnimg.cn/blog_migrate/d3b2d47858e465762e968661fa8f6031.png)

###### LED和晶振

![](https://i-blog.csdnimg.cn/blog_migrate/697d0c36359456466a57059aacb0f737.png)

###### OLED显示屏

![](https://i-blog.csdnimg.cn/blog_migrate/23c67796a49037efb017f7efba34c026.png)

###### GND网络布线

![](https://i-blog.csdnimg.cn/blog_migrate/5488b11212c4c6467faadadaf791b6b2.png)







当然我这块板子是我布线的第一块板子，来来回回弄了一个下午加一个晚上，很多地方都没有注意到：

比如，布线时尽可能遵守一层水平布线，另一层垂直走线的原则，好多地方布线都是比较琐碎的

比如，晶振电路的布线一般都是位于同一层，但是我一开始对外扩引脚的布线没有设置后，导致后续的晶振电路布线比较难弄，下次应该是作为先弄的一块

比如，对元器件布线的顺序

比如，线的粗细，过孔的粗细等等都不太比较熟悉，设置也不太合理

……

这里说几个注意的点：

1. 电源线主干部分线宽尽量大一些；
2. 晶振周围少走信号线或者用地线包围，以免造成干扰；
3. 走线不要靠近板子边缘。

下图仅为了展示效果，走线并不是很好。



![](https://i-blog.csdnimg.cn/blog_migrate/2e2854d120aed6aeca8b58f49523ce78.png)

 
 
 
#### （5）添加泪滴

![](https://i-blog.csdnimg.cn/blog_migrate/99c9bd935402986b455b646e336f5c08.png)

 
 
#### （6）添加铺铜
 
 在添加完过孔之后，再铺铜！！！

![](https://i-blog.csdnimg.cn/blog_migrate/13cd5b51d5aba17f2c215d317adee0a3.png)









**操作认知**

![1733329873328.png](https://www.helloimg.com/i/2024/12/05/6750826e317cb.png)
						图：L1直接从GND铺铜中连接地

>**解释**：上图








#### （7）添加丝印字符


![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1214991b557a34184532548b16433db3.png)


####  （8）DRC检查

![](https://i-blog.csdnimg.cn/blog_migrate/8b094d61c8807cc2b2acd0c293d1375f.png)

这里好多布线的问题……希望之后自己可以再来练习练习，先把流程走一遍 

## 回答几个问题

> **1、芯片下边可以走线或添加过孔吗，过孔和线宽怎么选择？**

![](https://i-blog.csdnimg.cn/blog_migrate/ca14c7b2f07eebe32999e4c0f906b701.png)

>  **2、过孔放置位置有要求吗 ？**

![](https://i-blog.csdnimg.cn/blog_migrate/0b292c94e40c33cd3a06cd9bbde133c3.png)

![](https://i-blog.csdnimg.cn/blog_migrate/bfbb7de7627506b16f40ae9849cc21e0.png)

>  **3、泪滴的作用是什么？**

![](https://i-blog.csdnimg.cn/blog_migrate/08e4955f8c08e516e9ad294e50d13311.png)

>  4、**焊盘是什么？**

![](https://i-blog.csdnimg.cn/blog_migrate/10c96b49b96020dfdc39976f8d591231.png)

> **5、铺铜的作用是什么呢？ 铺铜与接地GND有什么关系呢？**

![](https://i-blog.csdnimg.cn/blog_migrate/b5f51f606741dcc7eac0823480816887.png)

 ![](https://i-blog.csdnimg.cn/blog_migrate/c78ecac14405f2a3fc8eae8831b17749.png)

 ![](https://i-blog.csdnimg.cn/blog_migrate/b248dc4a22f61dccbc34f49a0a8bbc78.png)

>  **6、什么是drc规则检查？**

![](https://i-blog.csdnimg.cn/blog_migrate/b8e838cb9a745b81d1c17efd645f5f47.png)

> **7、pcb布线的顺序有什么需要注意的地方吗？**

![](https://i-blog.csdnimg.cn/blog_migrate/3b812702117e0feb15c095ce0ceaa8df.png)

## 五、采购PCB、物料




## 六、焊接元件到PCB
### 1. 分类元件




### 2. 规划上手

#### （1）规划步骤





#### （2）具化执行







### 3. 测试验证





### 4. 诊断分析







## 七、验证PCB功能



## 八、修正PCB设计