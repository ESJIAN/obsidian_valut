## 前言

> 恭喜各位，我把本文内容制作成了md格式和word格式，方便考研学子使用。如需下载请点击[md格式下载](https://download.csdn.net/download/haojie_duan/88303028)或[word格式下载](https://download.csdn.net/download/haojie_duan/88303503)

- 个人觉得：《计算机组成原理》这门课，应该设置为大学公共必修课（起码理工科）！
    
- 学这门课之前，小编在学习[ARM架构](https://so.csdn.net/so/search?q=ARM%E6%9E%B6%E6%9E%84&spm=1001.2101.3001.7020)，结果越看越迷糊，就果断转入这门课程的学习！
    
- 免责声明：本文参考的文章有：[《王道计算机组成原理》学习笔记总目录+思维导图](https://blog.csdn.net/weixin_43914604/article/details/104096298)；B站视频：[2019 王道考研 计算机组成原理](https://www.bilibili.com/video/BV1BE411D7ii?from=search&seid=8478816210875717160)；配套教材是《2021年计算机组成原理考研复习指导（王道论坛版）》[如需要这本书，请自己想办法获取]，还用了《2020版计算机组成原理·高分笔记·周伟主编》；如果您是考研党：[请点击跳转知乎经验贴，了解408](https://zhuanlan.zhihu.com/p/122469340)
    
- 本文食用说明：对于考研学子，说真的，建议学完一遍计组，再做题，因为王道这本书里面习题编排的不是很严谨！（前面很多题目，到后面章节才可以找到答案！）。本文的章节序号完全按照《2021年计算机组成原理考研复习指导（王道论坛版）》记录的，与视频有点出入！
    

> 计算机组成原理比较经典的书籍有：
> 
> - 唐朔飞的《计算机组成原理》、《计算机组成原理——学习指导与习题解答》
> - 白中英的《计算机组成原理》
> - 李春葆的《计算机组成原理联考辅导教程》

## 第一章 计算机系统概述

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/222fe425475cf2e344f09d4985d0947a.png)

### 【复习提示】

本章是组成原理的概述，考查时易针对有关概念或[性能](https://marketing.csdn.net/p/3127db09a98e0723b83b2914d9256174?pId=2782&utm_source=glcblog&spm=1001.2101.3001.7020)指标出选择题，也可能综合后续章节的内容出有关性能分析的综合题。掌握本章的基本概念，是学好后续章节的基础。部分知识点在初学时理解不深刻也无须担忧，相信随着后续章节的学习，一定会有更为深入的理解。本章中读者要重点掌握各个性能指标的计算，这部分内容在历年真题中出现的频率很高。

学习本章时，请读者思考以下问题：

- 1)计算机由哪几部分组成？以哪部分为中心？
- 2)主频高的CPU一定比主频低的CPU快吗？为什么？
- 3)翻译程序、汇编程序、编译程序、解释程序有什么差别？各自的特性是什么？
- 4)不同级别的语言编写的程序有什么区别？哪种语言编写的程序能被硬件直接执行？

请读者在学习本章的过程中寻找答案，本章末尾会给出参考答案。

### 1.1 计算机发展历程

#### 1.1.1 计算机硬件的发展

计算机系统=硬件+[软件](https://marketing.csdn.net/p/3127db09a98e0723b83b2914d9256174?pId=2782&utm_source=glcblog&spm=1001.2101.3001.7020)

计算机硬件的发展：

- 第一代计算机：(使用电子管)，
- 第二代计算机：(使用晶体管)，
- 第三代计算机：(使用较小规模的集成)，
- 第四代计算机：(使用较大规模的集成)，

已经经历了4代，计算机的速度越来越快，并且体积变得越来越小。  
发展趋势：更微型、多用途；更巨型、超高速

> 晶体管之父：肖克利（1956年诺贝尔物理学奖得主）  
>   
> 1957年，"八叛徒"创立了仙童半导体  
> 1959年，仙童半导体发明了“集成电路”  
> 1968年，摩尔离开仙童，创立intel  
> 1969年，仙童销售部负责人桑德斯离开仙童，创立AMD

摩尔定律，集成电路上的晶体管数量每18月就会翻一翻，所以每18月计算机的处理效率就会提高一倍。

#### 1.1.2 计算机软件的发展

计算机软件技术的发展，促进计算机系统的发展。

计算机语言的发展经历了面向机器的机器语言和汇编语言、面向问题的高级语言。其中高级语言的发展真正促进了软件的发展，它经历了从科学计算和工程计算的 FORTRAN、**结构化程序设计的 PASCAL**到**面向对象的C++**和**适应网络环境的Java**。

同时，直接影响计算机系统性能提升的各种系统软件也有了长足的发展，特别是操作系统，如 Windows、UNIX、 **Linux**等。

#### 1.1.3 计算机的分类与发展方向

可以分为：

- 电子模拟计算机和电子数字计算机。

数字计算机又可以按照用途分为：

- 专用计算机和通用计算机
- 通用计算机又分为：巨型机、大型机、中型机、小型机、微型机和单片机6类。

按照指令和数据流可以分为：

- 单指令流和单数据流系统（SISD），即传统的冯·诺依曼体系结构。
- 单指令流和多数据流系统（SIMD），包括阵列处理器和向量处理器系统。
- 多指令流和单数据流系统（MISD），这种计算机实际上不存在。
- 多指令流和多数据流系统（MIMD），包括多处理器和计算机系统。

### 1.2 计算机系统层次结构

#### 1.2.1计算机系统的组成

计算机系统由硬件系统和软件系统共同构建起来

#### 1.2.2 计算机硬件的基本组成

##### 1.早期的冯·诺依曼机

> 美籍匈牙利科学家冯·诺依曼最先提出“程序存储”的思想，并成功将其运用在计算机的设计之中，根据这一原理制造的计算机被称为冯·诺依曼结构计算机。由于他对现代计算机技术的突出贡献，因此冯·诺依曼又被称为“现代计算机之父”。  
>   
> 什么是存储程序原理？按此原理，计算机应具有哪几大功能？  
>   
> “程序存储”：指令以代码的形式事先输入到计算机的主存储器中，然后按其在存储器中的首地址执行程序的第一条指令，以后就按该程序的规定顺序执行其他指令，直至程序执行结束。即按地址访问并顺序执行指令  
>   
> 计算机按照此原理应具有5大功能：数据传送功能、数据存储功能、数据处理功能、操作控制功能、操作判断功能

- 冯诺曼体系结构特点:

1. 计算机硬件系统由五大部件组成(存储器、运算器、控制器、输出设备、输入设备)
2. 指令和数据以同等地位存于存储器，可按地址寻访
3. 指令和数据用二进制表示
4. 指令由操作码和地址码组成
5. 存储程序
6. 以**运算器**为中心

> 早期的冯·诺依曼机以运算器为中心，且是单处理机，**最根本的特征**是采用“**存储程序**”原理，基本工作方式是控制流驱动方式！

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c1e19b556dfdb19218953d62f26064fd.png)

##### 2.现代计算机的组织结构

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c26b5953b18fb5ad6035c76b44073080.png)

##### 3.计算机的功能部件

主机：主存、运算器、控制器  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/aba0d8907f542b8d5134c2a4d8f4ee48.png)  
五大部分：

- <1> 输入设备，是指将外部信息以计算机能读懂的方式输入进来，如键盘，鼠标等
    
- <2> 输出设备，就是将计算机处理的信息以人所能接受的方式输出出来，比如显示屏，打印机。
    
- <3> 存储器，存储器分为 主存储器(内存储器，CPU能直接访问)和 辅助存储器(外存储器，协助主存储器记忆更多的信息，辅助存储器的信息需要导入到主存储器中，才可以被CPU访问)。  
      
    **主存储器**的工作方式是按存储单元的地址进行存取，这种存取方式称为按地址存取方式(**相联存储器**既可以既可以按照**地址寻址**，又可以按照**内容寻址**，为了与传统存储器区别，又称为**内容寻址的存储器**！)  
      
    主存储器是由地址寄存器(MAR)，数据寄存器(MDR)，存储体，时序控制逻辑，地址寄存器存放访存地址，经过地址译码后找到所选的存储单元。数据寄存器，是存储器与其他部件的中介，用于暂存要从存储器读或写的信息。时序控制逻辑用于产生存储器操作所需的各种时序信号。在现代CPU，MAR和MDR是在CPU中的。  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/309a748b65828c9af3944a37602e37a3.png)
    
- <4> 运算器，是计算机的运算单元，用于算术运算和逻辑运算  
    运算器的核心单元是算术逻辑单元(ALU)  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/59370b5b078eef087414167b20a06ca6.png)
    
- <5> 控制器，控制器是计算机的指挥中心，有其指挥各部件自动协调第进行工作，现代计算机将运算器和控制器集成到一个芯片上，合成为中央处理器，简称CPU。有程序计数器(PC)、指令寄存器(IR)和控制单元(CU)。  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/41438ab8fcd23f311c5b1013a4abe6bf.png)
    

一般将运算器和控制器集成到同一个芯片上，称为中央处理器(CPU)。CPU和主存储器共同构成主机，而除主机外的其他硬件装置(外存、I/O设备等)统称为外部设备，简称外设。

图1.4所示为冯・诺依曼结构的模型机。CPU包含ALU、通用寄存器组GPRs、标志寄存器、控制器、指令寄存器IR、程序计数器PC、存储器地址寄存器MAR和存储器数据寄存器MDR。图中从控制器送出的虚线就是控制信号，可以控制如何修改PC以得到下一条指令的地址，可以控制ALU执行什么运算，可以控制主存是进行读操作还是写操作(读/写控制信号)。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/0badcbec6ad41a86bda65473f2a03c6c.png)  
CPU和主存之间通过一组总线相连，总线中有地址、控制和数据3组信号线。MAR中的地址信息会直接送到地址线上，用于指向读/写操作的主存存储单元；控制线中有读/写信号线，指出数据是从CPU写入主存还是从主存读出到CPU,根据是读操作还是写操作来控制将MDR中的数据是直接送到数据线上还是将数据线上的数据接收到MDR中。

#### 1.2.3 计算机软件的分类

##### 1.系统软件和应用软件

计算机软件，一般分为系统软件和应用软件

- 系统软件包括 操作系统，数据库管理系统，语言处理系统(比如编译器)，分布式软件系统，网络软件系统，标准库系统，服务性系统(比如连接程序)。
    
- 应用软件包括各种科学计算类程序，工程设计类程序，数据统计与处理程序。
    

注意：数据库管理系统和数据库系统是有区别的。数据库管理系统是系统软件。而数据库系统一般是由数据库，数据库管理系统，数据库管理员和应用系统构成。所以只能说它里面有系统软件，但并不能说它为系统软件。

##### 2.三个级别的语言

- 1)**机器语言**。又称二进制代码语言，需要编程人员记忆每条指令的二进制编码。机器语言是计算机唯一可以直接识别和执行的语言。
- 2)**汇编语言**。汇编语言用英文单词或其缩写代替二进制的指令代码，更容易为人们记忆和理解。使用汇编语言编辑的程序，必须经过一个称为汇编程序的系统软件的翻译，将其转换为计算机的机器语言后，才能在计算机的硬件系统上执行。
- 3)**高级语言**。高级语言(如C、C++、Java等)是为方便程序设计人员写出解决问题的处理方案和解题过程的程序。通常高级语言需要经过编译程序编译成汇编语言程序，然后经过汇编操作得到机器语言程序，或直接由高级语言程序翻译成机器语言程序。

由高级语言转换到汇编语言的过程叫做编译，由汇编语言转换到机器语言的过程叫做汇编，边翻译边执行的叫做解析。

机器语言是唯一可以控制cpu的语言，因为它的符号不利于人识别和书写，为了方便理解和记忆，将机器语言换一些通俗易懂的符号，这就变成了汇编语言。一般来说在在编译器中高级语言先转换为汇编在转换为机器语言，也有直接转换为机器语言的情况。

> 机器语言是计算机唯一可以直接执行的语言，汇编语言用助记符编写，以便记忆。而正则语言是编译原理中符合正则文法的语言。  
>   
> 解释程序的特点是翻译一句执行一句，边翻译边执行：由高级语言转化为汇编语言的过程称为编译，把汇编语言源程序翻译成机器语言程序的过程称为汇编。

#### 1.2.4 计算机的工作过程

##### 2.指令执行过程的描述[(点击链接，视频20min处有详细讲解)](https://www.bilibili.com/video/BV1BE411D7ii?p=5)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/31baaf6d529629bc20727e375125b672.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e2b88b774856dc17aa5d340054c6d42d.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2b1996c5e81c9c7566a3b2e7d1aa55b2.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b08119c40946c993e02c08b8e654a6fe.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8b6dad4f83ad00b84c2abc6cee2d6c54.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2861067e348f90a8d0e6b1a20f6f8d05.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d82f6c97ea5a51a3346a3a42b85df158.png)

> IR存放当下**欲执行的指令**；PC存放**下一条指令的地址**；  
>   
> MAR存放**欲访问的存储单元地址**；MDR存放**从存储单元取来的数据**！  
>   
> 地址译码器是**主存的构成部分，不属于CPU**；地址寄存器虽然一般属于主存，但是现代计算机中绝大多数CPU内集成了地址寄存器！  
>   
> 关于CPU存取速度的比较：寄存器（CPU内部）> Cache(高速的SRAM) > 内存 （SDRAM）

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/07af62c2b8870c03071c01f4d495ceb6.png)  
上图是计算机的工作流程，首先PC将指令地址发送给MAR，MAR根据地址在存储体中找到指令数据存放在MDR中，之后MDR将指令存放在IR中，取指令结束，之后指令中的操作码进入CU中，地址码重复上述取指令步骤，将数据发送到ACC中，执行指令结束。注意区分指令和数据的依据:指令周期的不同阶段

### 1.3 计算机性能指标

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ee87767dc4377de8c9b2d8ede73410d4.png)

1. 机器字长  
    计算机的位数（机器字长），表示计算机进行一次整数运算(即定点整数运算)所能处理的二进制数据的位数。计算机字长通常选定为字节(8位)的整数倍，通常是2,4,8倍。不同的计算机，字节可能不同

> 机器字长、指令字长、存储字长的区别和联系是什么？
> 
> - **机器字长**：计算机能直接处理的二进制数据的位数，机器字长**一般等于内部寄存器的大小**，它决定了**计算机的运算精度**。
> - 指令字长：一个指令字中包含的二进制代码的位数。
> - 存储字长：一个存储单元存储的二进制代码的长度。等于MDR的位数， 它们都必须是字节的整数倍。
> - 数据字长：数据总线一次能传送信息的位数，它可以不等于MDR的位数。  
>       
>     指令字长一般取存储字长的整数倍，若指令字长等于存储字长的2倍，则需要2次访存来取出一条指令，因此取指周期为机器周期的2倍；若指令字长等于存储字长，则取指周期等于机器周期。  
>       
>     早期的计算机存储字长一般和机器的指令字长与数据字长相等，因此访问一次主存便可取出一条指令或一个数据。随着计算机的发展，指令字长可变，数据字长也可变，但它们必须都是字节的整数倍。  
>       
>     请注意64位操作系统是指特别为64位架构的计算机而设计的操作系统，它能够利用64位处理器的优势。但64位机器既可以使用64位操作系统，又可以使用32位操作系统。而32位处理器是无法使用64位操作系统的。

2. 数据通路带宽  
    数据总线一次所能传送信息的位数。
3. 主存容量  
    MAR的位数反映存储单元的个数，如MAR为16位，表示存储单元为216 = 64K;若MDR为32位，则存储容量为216x32.  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2a8f1aec7ec252b03fbc57fbbc56a54c.png)
4. 运算速度

> 吞吐量，指系统在单位时间内处理请求的数量 ；从用户观点看，它是评价计算机系统性能的综合参数！  
>   
> 响应时间，指从用户向计算机发送一个请求，到系统对该请求做出响应并获得所需结构的等待时间。

> CPU时钟周期。通常为节拍脉冲或T周期，即主频的倒数，它是CPU中最小的时间单位，每个动作至少需要1个时钟周期。  
>   
> 主频(CPU时钟频率)。机器内部主时钟的频率，是衡量机器速度的重要参数。
> 
> - CPU周期又称为机器周期，由多个时钟周期组成！
> - 指令周期>CPU周期>时钟周期

> CPI（Clock cycle Per Instruction），即执行一条指令所需的时钟周期数。

> CPU执行时间，指运行一个程序所花费的时间。  
> CPU执行时间 = CPU时钟周期数/主频 = (指令条数xCPI)/主频  
> CPU的性能取决于三个要素:主频、CPI 、指令条数

> IPS(Instructions Per Second) =主频/平均CPI，每秒执行多少指令  
>   
> MIPS(Million Instructions Per Second)=即每秒执行多少百万条指令。
> 
>   
> MFLOPS(Mega Floating-point Operations Per Second)=浮点操作次数/(执行时间x106),即每秒执行多少百万次浮点运算。
> 
>   
> GFLOPS(Giga Floating-point Operations Per Second)=浮点操作次数/(执行时间x109)，即每秒执行多少十亿次浮点运算。
> 
>   
> TFLOPS(Tera Floating-point Operations Per Second)=浮点操作次数/(执行时间x1012)，即每秒执行多少万亿次浮点运算。

### 1.4本章开头提出的问题回答

#### 1) 计算机由哪几部分组成？以哪部分为中心？

- 1)计算机由哪几部分组成？以哪部分为中心？  
      
    计算机由运算器、控制器、存储器、输入设备及输出设备五大部分构成，现代计算机通常把运算器和控制器集成在一个芯片上，合称为中央处理器。  
    而在微处理器面世之前(早期的冯·诺依曼机)，运算器和控制器分离，而且存储器的容量很小，因此设计成以运算器为中心的结构，其他部件都通过运算器完成信息的传递。  
    随着微电子技术的进步，同时计算机需要处理、加工的信息量也与日俱增，大量IO设备的速度和CPU的速度差距悬殊，因此以运算器为中心的结构不能满足计算机发展的要求。现代计算机已经发展为以存储器为中心，使IO操作尽可能地绕过CPU,直接在IO设备和存储器之间完成，以提高系统的整体运行效率。

#### 2) 主频高的CPU一定比主频低的CPU快吗？为什么？

- 2)主频高的CPU一定比主频低的CPU快吗？为什么？  
      
    衡量CPU运算速度的指标有很多，不能以单独的某个指标来判断CPU的好坏。CPU的主频，即CPU内核工作的时钟频率。CPU的主频表示CPU内数字脉冲信号振荡的速度，主频和实际的运算速度存在一定的关系，但目前还没有一个确定的公式能够定量两者的数值关系，因为CPU的运算速度还要看CPU的流水线的各方面的性能指标（架构、缓存、指令集、CPU的位数、 Cache大小等）。由于主频并不直接代表运算速度，因此在一定情况下很可能会出现主频较高的CPU实际运算速度较低的现象

> 来看看小编的配置，感受一下，以后计算机组成原理中的Cache和主频等  
> ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/af62a75b998521d0f1398b52170d0d61.png)

#### 3)翻译程序、汇编程序、编译程序、解释程序有什么差别？各自的特性是什么？

- 3)翻译程序、汇编程序、编译程序、解释程序有什么差别？各自的特性是什么？  
      
    翻译程序是指把高级语言源程序翻译成机器语言程序（目标代码）的软件。  
    翻译程序有两种：一种是编译程序，它将高级语言源程序一次全部翻译成目标程序，每次执行程序时，只需执行目标程序，因此只要源程序不变，就无须重新翻译，请注意同一种高级语言在不同体系结构下，编译成目标程序是不一样的，目标程序与体系结构相关，但仍不是计算机硬件能够直接执行的程序。另一种是解释程序，它将源程序的一条语句翻译成对应的机器目标代码，并立即执行，然后翻译下一条源程序语句并执行，直至所有源程序语句全部被翻译并执行完。所以解释程序的执行过程是翻译一句执行一句，并且不会生成目标程序。  
    汇编程序也是一种语言翻译程序，它把汇编语言源程序翻译为机器语言程序。汇编语言是种面向机器的低级语言，是机器语言的符号表示，与机器语言一一对应。  
    编译程序与汇编程序的区別：若源语言是诸如C、C++、Java等“高级语言”，而目标语言是诸如汇编语言或机器语言之类的“低级语言”，则这样的一个翻译程序称为编译程序。若源语言是汇编语言，而目标语言是机器语言，则这样的一个翻译程序称为汇编程序。

#### 4)不同级别的语言编写的程序有什么区别？哪种语言编写的程序能被硬件直接执行？

- 4)不同级别的语言编写的程序有什么区别？哪种语言编写的程序能被硬件直接执行？  
      
    机器语言和汇编语言与机器指令对应，而高级语言不与指令直接对应，具有较好的可移植性。其中机器语言可以被硬件直接执行。

### 1.5 常见问题

#### 1.同一个功能既可以由软件实现又可以由硬件实现吗？

- 1.同一个功能既可以由软件实现又可以由硬件实现吗？  
      
    软件和硬件是两种完全不同的形态，硬件是实体，是物质基础；软件是一种信息，看不见、摸不到。但在逻辑功能上，软件和硬件是等效的。因此，在计算机系统中，许多功能既可以由硬件直接实现，又可以在硬件的配合下由软件实现。  
    一个最大的区别就是，硬件实现比软件实现的速度快很多，但是成本也高！所以，芯片在流片之后，如果发现bug可以用软件修复就用软件修复！  
    例如，乘法运算既可用专门的乘法器（主要由加法器和移位器组成）实现，也可用乘法子程序（主要由加法指令和移位指令等组成）来实现。

#### 2.翻译程序、汇编程序、编译程序、解释程序的区别和联系是什么？

- 见本章开头提出的问题

#### 3.什么是透明性？透明是指什么都能看见吗？

- 3.什么是透明性？透明是指什么都能看见吗？  
      
    在计算机领域中，站在某类用户的角度，若感觉不到某个事物或属性的存在，即“看”不到某个事物或属性，则称为“对该用户而言，某个事物或属性是透明的”。这与日常生活中的“透明”概念(公开、看得见)正好相反。  
    例如，对于高级语言程序员来说，浮点数格式、乘法指令等这些指令的格式、数据如何在运算器中运算等都是透明的；而对于机器语言或汇编语言程序员来说，指令的格式、机器结构、数据格式等则不是透明的。  
    在CPU中，IR、MAR和MDR对各类程序员都是透明的。

#### 4.机器字长、指令字长、存储字长的区别和联系是什么？

- 4.机器字长、指令字长、存储字长的区别和联系是什么？  
    
- **机器字长**：计算机能直接处理的二进制数据的位数，机器字长**一般等于内部寄存器的大小**，它决定了**计算机的运算精度**。  
    指令字长：一个指令字中包含的二进制代码的位数。  
    存储字长：一个存储单元存储的二进制代码的长度。等于MDR的位数， 它们都必须是字节的整数倍。  
    数据字长：数据总线一次能传送信息的位数，它可以不等于MDR的位数。  
      
    指令字长一般取存储字长的整数倍，若指令字长等于存储字长的2倍，则需要2次访存来取出一条指令，因此取指周期为机器周期的2倍；若指令字长等于存储字长，则取指周期等于机器周期。  
      
    早期的计算机存储字长一般和机器的指令字长与数据字长相等，因此访问一次主存便可取出一条指令或一个数据。随着计算机的发展，指令字长可变，数据字长也可变，但它们必须都是字节的整数倍。  
      
    请注意64位操作系统是指特别为64位架构的计算机而设计的操作系统，它能够利用64位处理器的优势。但64位机器既可以使用64位操作系统，又可以使用32位操作系统。而32位处理器是无法使用64位操作系统的。

#### 5.计算机体系结构和计算机组成的区别和联系是什么？

- 5.计算机体系结构和计算机组成的区别和联系是什么？  
      
    计算机体系结构是指机器语言或汇编语言程序员所看得到的传统机器的属性，包括指令集、数据类型、存储器寻址技术等，大都属于抽象的属性。  
    计算机组成是指如何实现计算机体系结构所体现的属性，它包含对许多对程序员来说透明的硬件细节。例如，指令系统属于结构的问题，但指令的实现即如何取指令、分析指令、取操作数如何运算等都属于组成的问题。因此，当两台机器指令系统相同时，只能认为它们具有相同的结构，至于这两台机器如何实现其指令，完全可以不同，即可以认为它们的组成方式是不同的。例如，一台机器是否具备乘法指令是一个结构的问题，但实现乘法指令采用什么方式则是一个组成的问题。（简言之，看**有没有**这个属性，就是**结构**问题；看**怎么实现**，就是**组成问题**）  
    许多计算机厂商提供一系列体系结构相同的计算机，而它们的组成却有相当大的差别，即使是同一系列的不同型号机器，其性能和价格差异也很大。例如， IBM System/370结构就包含了多种价位和性能的机型。

#### 6.基准程序执行得越快说明杺器的性能越好吗？

- 6.基准程序执行得越快说明机器的性能越好吗？  
      
    一般情况下，基准测试程序能够反映机器性能的好坏。但是，由于基准程序中的语句存在频度的差异，因此运行结果并不能完全说明问题。

## 第二章 数据的表示与运算

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/fbfd556035d1515cb69fb9497f34cbe6.png)

### 【复习提示】

本章内容较为繁杂，由于计算机中数的表示和运算方法与人们日常生活中的表示和运算方法不同，因此理解也较为困难。纵观近几年的真题，不难发现 unsigned、shot、int、long、foat、 double等在C语言中的表示、运算、溢出判断、隐式类型转换、强制类型转换、IEEE754浮点数的表示，以及浮点数的运算，都是考研考查的重点，需要牢固掌握。

在学习本章时，请读者思考以下问题：

- 1)在计算机中，为什么要采用二进制来表示数据？
- 2)计算机在字长足够的情况下能够精确地表示每个数吗？若不能，请举例说明。
- 3)字长相同的情况下，浮点数和定点数的表示范围与精度有什么区别？
- 4)用移码表示浮点数的阶码有什么好处？

请读者在本章的学习过程中寻找答案，本章末尾会给出参考答案。

### 2.1 数制与编码

还是要系统学习一下，不然之前的0x1010还查了好久！

#### 2.1.1 进位计数制及其相互转化

##### 知识点回顾与重点考点（如果知道了，就不用看了）

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5586a24cc9076b70895dc628ea9be86a.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/61ec3b0ee1a4f9fc13d97168eab59bcd.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/fc7e056ceed1e7fa2e876a31da079841.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8b7632e5bc0359b0e4f5680fba575271.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/731835b50ec7dc83c40ae94a98521eab.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/fc2727accc6513874be122ae3afdf02e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/6e1c0dbd4a5acf6c0e1c0e4b4f565571.png)

- 四级网络工程师考试，就用这个方法，妙！  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/352323b8534a93c5bfbc143affddacd4.png)

##### 知识回顾与重点考点

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5586a24cc9076b70895dc628ea9be86a.png)

#### 2.1.2 BCD码（Binary-Code Decimal码）

注意：这是为了表示0和9，所以1010~1111都是违法的，以前都没在意！  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/0e45a2f6305f8d3f8e66d0aa3a77d2d9.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e29dab138174435e7cee71aca4e0a668.png)

##### 知识回顾与重要考点

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d46d95b1e2be22d4b240054d3047af54.png)

#### 2.1.4 字符与字符串

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/386227fdb1cacfc627fd6a63c0c91899.png)

##### 1.字符编码ASCII码

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/49b74cc4a0c0cfd36da3c125f6dcc9ac.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7241d052e93f5968d336061655105e1b.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3fce389841f0ef3b84a420e9e225f038.png)

##### 字符串

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b20823d34114db0033f73eb832c7b0a6.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e2c7fb24647ba65275a67f61b18e06f1.png)

##### 知识回顾与重要考点

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/add6c5bb518b34784123fe7b73619a9f.png)

#### 2.1.5 校验码

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/93e4f1a9a54208fb959fdcb002f7c6bb.png)

> 任意两个码字之间最少变化的二进制位数称为码距，码距大于等于2的数据校验码开始具有检错的能力。码距越大，检错、纠错能力越强。奇偶校验码的码距等于2,可以检测出一位错误（或奇数位错误），但不能确定出错的位置，也不能检测出偶数位错误；海明码的码距大于2,因此不仅可以发现错误，还能指出错误的位置。仅靠增加奇偶校验位的位数不能提高正确性，还要考虑码距。  
>   
> 具有检、纠错能力的数据校验码的实现原理：在编码中，除合法码字外，再加入一些非法码字，当某个合法码字出现错误时，就变为非法码字。合理安排非法码字的数量和编码规则就能达到纠错的目的。

##### 1.奇偶校验码

原编码上加一个校验位，码距等于2！  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a970ee36dbd145e24b24ae7465936371.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e051361c7378d7565e9e531151d0c01b.png)  
知识回顾与重要考点

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ecdbffc1c4bc3b60fe4c6f4aa8d2e7d2.png)

##### 2.海明（汉明）校验码

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ef82d56a4c9123c1ac62b4960087b3d7.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c261e94fd65b5e3f3a031df84dca8759.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/23f22c043b055368a835173b17bab7c2.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8618f635ddefa41307eeeabccabced35.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/23e0b8bc0c25370fe2e7e81ffe3eac93.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/bbf970905e8ede6037ca72b5f87057f6.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/dd84a82040f97c80c743bc10bbbb46c0.png)

##### 3. 循环冗余校验（CRC）码

终于知道了《UVM实战》中的CRC校验是什么回事了！  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/249fbfb07d9f25b2bc8e40b54a57f41b.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/34535ed57e695cee662b0f6b33f8443f.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e79227259e72d22c83804c3b8f836e6e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5b9613d8943f46257332c0e75c1cd193.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2dc83b9dd253601d965ddcdbbef9eef2.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1d91dfb26bed6bbac415fbb90f0ed223.png)

> CRC校验码是可以纠错的，前面这个是因为信息位太长

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ede6ae9725ae977d507bee0a6bfc6763.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3e9b7a972b8da33d2fcfa1b66226eaf1.png)

### 2.2 定点数的表示和运算

### 2.3 浮点数的表示与运算

### 2.4 算数逻辑单元（ALU）

### 2.5 本章开头提出的问题回答

#### 1)在计算机中，为什么要采用二进制来表示数据？

- 1)在计算机中，为什么要采用二进制来表示数据？  
      
    从可行性来说，采用二进制，只有0和1两个状态，能够表示0、1两种状态的电子器件很多，如开关的接通和断开、晶体管的导通和截止、磁元件的正负剩磁、电位电平的高与低等，都可表示0、1两个数码。使用二进制，电子器件具有实现的可行性。  
    从运算的简易性来说，二进制数的运算法则少，运算简单，使计算机运算器的硬件结构大大简化(十进制的乘法九九口诀表有55条公式，而二进制乘法只有4条规则)从逻辑上来说，由于二进制0和1正好和逻辑代数的假( false)和真(true)相对应，有逻辑代数的理论基础，用二进制表示二值逻辑很自然。

#### 2)计算机在字长足够的情况下能够精确地表示每个数吗？若不能，请举例说明。

- 2)计算机在字长足够的情况下能够精确地表示每个数吗？若不能，请举例说明。  
      
    计算机采用二进制来表示数据，在字长足够时，可以表示任何一个整数。而二进制表示小数时只能够用1(2)的和的任意组合表示，即使字长很长，也不可能精确表示出所有小数，只能无限逼近。例如0.1就无法用二进制精确地表示。

#### 3)字长相同的情况下，浮点数和定点数的表示范围与精度有什么区别？

- 3)字长相同的情况下，浮点数和定点数的表示范围与精度有什么区别？  
      
    字长相同时，浮点数取字长的一部分作为阶码，所以表示范围比定点数要大，而取一部分作为阶码也就代表着尾数部位的有效位数减少，而定点数字长的全部位都用来表示数值本身，精度要比同字长的浮点数更大。

#### 4)用移码表示浮点数的阶码有什么好处？

- 4)用移码表示浮点数的阶码有什么好处？  
      
    移码的两个好处  
    ①浮点数进行加减运算时，时常要比较阶码的大小，相对于原码和补码，移码比较大小更方便。  
    ②检验移码的特殊值(0和max)时比较容易。阶码以移码编码时的特殊值如下。**0**:表示指数为负无穷大，相当于分数分母无穷大，整个数无穷接近0,在尾数也为0时可用来表示0:尾数不为零表示未正规化的数。**max**:表示指数正无穷大，若尾数为0,则表示浮点数超出表示范围（正负无穷大）；尾数不为0,则表示浮点数运算错误

### 2.6 常见问题

#### 1.如何表示一个数值数据？计算机中的数値数据都是二进制数吗？

- 1.如何表示一个数值数据？计算机中的数値数据都是二进制数吗？  
      
    在计算机内部，数值数据的表示方法有以下两大类。  
    ①直接用二进制数表示。分为无符号数和有符号数，有符号数又分为定点数表示和浮点数表示。无符号数用来表示无符号整数（如地址等信息）；定点数用来表示整数；浮点数用来表示实数。  
    ②二进制编码的十进制数，一般都采用8421码(也称NBCD码)来表示，用来表示整数。  
    所以，计算机中的数值数据虽然都用二进制来编码表示，但不全是二进制数，也有用十进制数表示的。后面一章有关指令类型的内容中，就有对应的二进制加法指令和十进制加法指令。

#### 2.在高级语言编程中所定义的 unsigned/short/int/long/float/double型数据是怎么表示的？什么称为无符号整数的“溢出”？

- 2.在高级语言编程中所定义的 unsigned/short/int/long/float/double型数据是怎么表示的？什么称为无符号整数的“溢出”？  
      
    unsigned型数据就是无符号整数，不考虑符号位。直接用全部二进制位对数值进行编码得到的就是无符号数，一般都用补码表示。  
      
    int型数据就是定点整数，一般用补码表示。int型数据的位数与运行平台和编译器有关，一般是32位或16位。例如，真值是-12的int型整数，在机器内存储的机器数（假定用32位寄存器寄存）是1111-1111-1111-1111-1111-1111-1111-0100.  
      
    long型数据和short型数据也都是定点整数，只是位数不同，分别是长整型和短整型数，通常用补码表示。  
      
    float型数据是用来表示实数的浮点数。现代计算机用IEEE754标准表示浮点数，其中32位单精度浮点数就是float型，64位双精度浮点数就是 double型。  
      
    需要注意的是，C语言中的int型和 unsigned型变量的存储方式没有区别，都按照补码的形式存储，在不溢出范围内的加减法运算也是相同的，只是int型变量的最高位代表符号位，而unsigned型中的最高位表示数值位，两者在C语言中的区别体现在输出时到底是采用%d还是采用%u。  
      
    对于无符号定点整数来说，若寄存器位数不够，则计算机运算过程中一般保留低n位，舍弃高位。这样，会产生以下两种结果。  
    ①保留的低n位数不能正确表示运算结果。在这种情况下，意味着运算的结果超出了计算机所能表达的范围，有效数值进到了第n+1位，称此时发生了“溢出”现象  
    ②保留的低n位数能正确表达计算结果，即高位的舍去并不影响其运算结果。

#### 3.如何判断一个浮点数是否是规格化数？

- 3.如何判断一个浮点数是否是规格化数？  
      
    为了使浮点数能尽量多地表示有效位数，一般要求运算结果用规格化数形式表示。“规格化浮点数的尾数小数点后的第一位一定是个非零数。因此，对于原码编码的尾数来说，只要看尾数的第一位是否为1就行：对于补码表示的尾数，只要看符号位和尾数最高位是否相反。需要注意的是，IEEE754标准的浮点数尾数是用原码编码的。

#### 4.对于位数相同的定点数和浮点数，可表示的浮点数个数比定点数个数多吗？

- 4.对于位数相同的定点数和浮点数，可表示的浮点数个数比定点数个数多吗？  
      
    不是，可表示的数据个数取决于编码所采用的位数。编码位数一定，编码出来的数据个数就是一定的。m位编码只能表示2m个数，所以对于相同位数的定点数和浮点数来说，可表示的数据个数应该一样多(有时可能由于一个值有两个或多个编码对应，编码个数会有少量差异)。

#### 5.浮点数如何进行舍入？

- 5.浮点数如何进行舍入？  
      
    舍入方法选择的原则是：①尽量使误差范围对称，使得平均误差为0,即有舍有入，以防误差积累。②方法要简单，以加快速度。  
    IEEE754有4种舍入方式。  
    ①就近舍入：舍入为最近可表示的数，若结果值正好落在两个可表示数的中间，则一般选择舍入结果为偶数。  
    ②正向舍入：朝+∞方向舍入，即取右边的那个数  
    ③负向舍入：朝-∞方向舍入，即取左边的那个数。  
    ④截去：朝0方向舍入，即取绝对值较小的那个数

#### 6.现代计算机中是否要考虑原码加减运算？如何实现?

- 6.现代计算机中是否要考虑原码加减运算？如何实现?  
      
    因为现代计算机中浮点数采用IEEE754标准，所以在进行两个浮点数的加减运算时，必须考虑原码的加减运算，因为IEEE754规定浮点数的尾数都用原码表示。  
    原码的加减运算可以有以下两种实现方式  
    1)转换为补码后，用补码加减法实现，结果再转换为原码。  
    2)直接用原码进行加减运算，符号和数值部分分开进行（具体过程见原码加减运算部分）。

#### 7.长度为n+1的定点数，按照不同的编码方式，表示的数值范围是多少？

- 7.长度为n+1的定点数，按照不同的编码方式，表示的数值范围是多少？  
      
    各编码方式的数值范围见表2.8  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/630d08cc5e5671393c0e6846c8ce7f2c.png)

#### 8.设阶码和尾数均用补码表示，阶码部分共K+1位(含1位阶符)，尾数部分共n+1位（含1位数符），则这样的浮点数的表示范围是多少？

- 8.设阶码和尾数均用补码表示，阶码部分共K+1位(含1位阶符)，尾数部分共n+1位（含1位数符），则这样的浮点数的表示范围是多少？  
      
    浮点数的表示范围见表2.9。  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/04653c43ac0a3cd081dcd48a3484806f.png)

## 第三章 存储系统

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/66b98e81fc90bfc3506c9467633e2ee8.png)

### 【复习提示】

本章是历年考査的重点，特别是有关 Cache和存储器扩展的知识点容易出综合题。此外，存储器的分类与特点，存储器的扩展(芯片选择、连接方式、地址范围等)，低位交叉存储器，Cache的相关计算与替换算法，虚拟存储器与快表也容易出选择题。读者应在掌握基本原理和理论的基础上，多结合习题进行练习复习，以加深和巩固。另外，读者还需掌握存在 Cache和TLB的计算机中的地址翻译与 Cache映射问题，该问题在《操作系统考研复习指导》中有详细说明。  
本章有两个难点：一是 ache映射规律、容量计算及替换特性；二是交又存储器访问时间和访问效率。二者都可与第5章的大题综合，或与第6章总线访问内存时间的计算问题综合。

在学习本章时，请读者思考以下问题：

- 1)存储器的层次结构主要体现在何处？为何要分这些层次？计算机如何管理这些层次？
- 2)存取周期和存取时间有何区别？
- 3)在虚拟存储器中，页面是设置得大一些好还是设置得小一些好？

请读者在学习本章的过程中寻找答案，本章末尾会给出参考答案。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8cb52cfb92f60ed1fc617e61715d829f.png)

### 3.1 存储器概述

#### 3.1.1 存储器的分类

> 相联存储器的基本原理是把存储单元所存内容的某一部分作为检索项（即关键字项）去检索该存储器，并将存储器中与该检索项符合的存储单元内容进行读出或写入。所以它是 按内容或地址进行寻址的，价格较为昂贵。 一般用来制作TLB、相联 Cache等。

按在计算机中的作用对存储器分类：

- 1> 主存储器,简称主存。CPU可以直接随机地对其进行访问，也可以和高速缓存器及辅助存储器交换数据。
    
- 2> 辅助存储器,简称辅存，不能与CPU直接相连，用来存放当前暂时不用的程序和数据
    
- 3> 高速缓冲存储器,位于主存和CPU之间，用来存放正在执行的程序段和数据
    

按存储介质分类：

- 磁表面存储器（磁盘，磁带），磁心存储器半导体存储器（MOS型存储器，双极存储器）和光存储器（光盘）。

按存取方式分类：

- 1> 随机存储器（RAM）。存储器的任何一个存储单元的内容都可以随机存取，而且存取时间与存取单元的物理位置无关，主要用作主存或高速缓冲存储器。
    
- 2> 只读存储器（ROM）。存储器的内容只能随机读出而不能写入。。即使断电，内容也不会丢失。
    
- 3> 串行访问存储器。对存储单元进行读/写操作时，需按其物理位置的先后顺序寻址，包括顺序存取存储器（如**磁带**）与直接存取存储器（如**磁盘**）。
    

按信息的可保存性分类：

- 断电后，存储信息即消失的存储器，称为易失性存储器，如RAM。断电后信息仍然保持的存储器，称为非易失性存储器，如ROM，磁表面存储器和光存储器。若某个存储单元所存储的信息被读出时，原存储信息被破坏，则称为破坏性读出；若读出时，被读单元原存储信息不被破坏，则称为非破坏性读出。具有破坏性读出性能的存储器，每次读出操作后，必须紧接一个再生的操作，以便恢复被破坏的信息。  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/0ad326410974404693b1611fa29a8899.png)  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b69d4cba3caa693102dcbd1ceaa46b2b.png)  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f543b20ba92e2b0f7b36027241668f37.png)

#### 3.1.2 存储器的性能指标

存储器的性能指标，有3个主要的性能指标，存储容量，单位成本和存储速度

- 1> 存储容量：存储字数*字长
    
- 2> 单位成本：每位价格=总成本/总容量
    
- 3> 存储速度：数据传输率=数据的宽度/存储周期
    

存取时间：存取时间时指从启动一次存储器操作到完成该操作所经历的时间，分为读出时间和写入时间。

存取周期：它是指存储器进行一次完整的读写操作所需的全部时间，即连续两次独立访问存储器操作（读或写操作）之间所需的最小时间间隔。

主存带宽：主存带宽又称数据传输率，表示每秒从主存进出信息的最大数量，单位为字/秒，字节/秒  
存取时间不等于存储周期，通常存储周期大于存取时间。因为任何一种存储器，在读写操作之后，总要有一段恢复内部状态的复原时间。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/32b25d182c4e9f948b5ede6e31ab0bb2.png)

### 3.2 存储器的层次结构

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d679ff8ea252bd55dc150e7192e63007.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/019e9c01568395fd4a51a7cd2e135601.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/45917d5542ef10e3f600b80113f9dc8c.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c0da5ba7f02869ddb4946d76a475bbd1.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ba662c9ed01b6ed33ccaafaf9cceb1af.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/01a402cd59466ba8d78a84dc85e7b3c9.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/75311fdb93ed457c1a4d815dedc0d0a7.png)

### 3.3 半导体随机存储器

#### 3.3.1 SRAM和DRAM

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e5460ab4f1bfd43e2553d29986523916.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/bafd8beffd2da2f327ae25594d8bce54.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/0952215dccce3a125a3d23f46d66ba12.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a94e96d6fbd602f22ce5009b593b4159.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8196643f948aba6fbcb84d2096abd038.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b80ae8ca6e1989312e1b56d9babc9574.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/67d9a67b5fb662c9539d9d98b61c46ee.png)

#### 3.3.2 只读存储器

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/64d34d40cce418724674050e12f718f1.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b441dc3a74080edd97b6c3d929ecdc64.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a3cc8305f0081fdb88aefc43fa83ec77.png)

#### 3.3.3 主存的基本组成（存储系统）

### 3.4 主存储器与CPU的连接

#### 3.4.2 主存容量的扩展

##### 1.位扩展

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/27cc715d7f1edaef7eefe834728a9f91.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/fe0e728489330c379894f4c1846d7818.png)

##### 2.字扩展

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7ff121420aaeef4bb67dd9faa3e88c43.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/6c6c2896bdadcb8b76a967953713f894.png)  
原来译码器的功能在这里可以使用！  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/84817bb7cbb74e127e7658b66fc7ef8b.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/478d78ca521f4f9f04fc02c754021e8f.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/470e308790d9b74e573153c28e9b21f7.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/be93cfec2d83d956646de2bdf8915068.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3bec3e19b42573c3802649a7dd66d307.png)

##### 3.字位同时扩展法

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e1cf638a2a58f440c4c8916bddd317c8.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3d5e06ae818437e8c5d219eb22d63846.png)  
设CPU有16根地址线，8根数据线，并用MREQ作为访存控制信号（低电平有效），用WR作为读/写控制信号（高电平为读，低电平为写）。现有下列存储芯片：1K×4位RAM，4K×8位RAM，8K×8位RAM，2K×8位ROM，4K×8位ROM，8K×8位ROM及74LS138译码器和各种门电路。画出CPU与存储器的连接图，要求：  
1）主存地址空间分配：6000H～67FFH为系统程序区；6800H～6BFFH为用户程序区。  
2）合理选用上述存储芯片，说明各选几片？  
3）详细画出存储芯片的片选逻辑图。  
补充：系统程序区用ROM，用户程序区用RAM  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/6303cfeb16aee98b1f0356c9ba859846.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/57a14d75ce1049bc4b0423f7d3e2f97a.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e986ab9b2e918b44445a63982e0ba6f1.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2e3f681241e0bd7d6d09fa6526e2fbf1.png)  
MAR和MDR是直接做在CPU芯片上面的！

### 3.5 双端口RAM和多模块存储器

#### 3.5.1 双端口RAM

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7ca200997a2c7b8316e60fa50e2348b5.png)

#### 3.5.2 多模块存储器

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ffdc3e956ca4eaeedd4d0c34a39c85c8.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/4b2bdf4b79975daefb6e0d3cf924a74e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/735c7c0db428ba8202756bb4a683a907.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7e6dc1ce597ca264393bf882af29b547.png)

> 交叉存储器实际上是一种模块式的存储器，它能并行执行多个独立的读/写操作。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/692ea89e2fb1b8835b8814fd58d1bf86.png)

### 3.6 高速缓冲存储器

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5a4841cc3dfbb384cb7837adea1b56c6.png)

#### 3.6.1 程序访问的局部性原理

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e832742d19e68be59b1e8cd21538c604.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ed8169cc43ef472f666bd713cd3713d2.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b0118ba3bf0e00d9127d520f3bb7b4a7.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/6384112c3a9ef0219412c49d97e41036.png)

#### 3.6.2 [Cache的基本工作原理](https://www.bilibili.com/video/BV1BE411D7ii?p=67)

直接好家伙！  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f6b83fb5fb8220f48d3285d78b8d5956.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f04787838a813b4eb48d401c242240cd.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f043f952cca03789fb4384d347038a03.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/806fcd43467a1e23af7492d6828b5a52.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f5bb151f88c68bf3e3f1615881ae6efa.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a5cd63d9f8053955cfa333d16b63f5d7.png)

#### 3.6.4 Cache中主存块的替换算法

1. 随机算法(RAND):随机地确定替换的 Cache块。它的实现比较简单，但没有依据程序访问的局部性原理，故可能命中率较低
2. 先进先出算法(FIFO):选择最早调入的行进行替换。它比较容易实现，但也没有依据程序访问的局部性原理，可能会把一些需要经常使用的程序块（如循环程序）也作为最早进入 Cache的块替换掉。
3. 近期最少使用算法（LRU):依据程序访问的局部性原理选择近期内长久未访问过的存储行作为替换的行，平均命中率要比FFO要高，是堆栈类算法。  
    LRU算法对每行设置一个计数器， Cache每命中一次，命中行计数器清0,而其他各行计数器均加1,需要替换时比较各特定行的计数值，将计数值最大的行换出。
4. 最不经常使用算法(LFU):将一段时间内被访问次数最少的存储行换出。每行也设置一个计数器，新行建立后从0开始计数，每访问一次，被访问的行计数器加1,需要替换时比较各特定行的计数值，将计数值最小的行换出。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c4988966ecb284ea2a759aa12494cbba.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d993b57f070a92611065cfd9cc822c99.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e89e60969be23121225dfa1a37bbb23e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/500a81e1146f3552362e767798f7cc36.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/568e4375c7fffa1db12a96f1af63cc04.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d640b26a864e9a4bd13f25197a7661f2.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ab6441c60dc4234c934854e7bb579e40.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9c05a95a3db8eb65dabba9ff9dd42708.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b5f07a19c896f5e19b49b2eeaf750464.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/30eed3169b171efbbfe162e5a38de754.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b9eda1e34499c1a9a237fceae2f00365.png)

##### Cache例题

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ff76e3b8e7f6dc4649504c30c6c444ed.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d1813815d08d7962c1ffd970da09222a.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5d035eea5becd2ea462deb616f4f736c.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/6da7c8076e94c24f12e17156f492ab8e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/00600da071dc1511f62c9b9298d4fa4b.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9d186552103b5301bb6bb42a61e26198.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/69de5c5f8a815779e92ce6e8acafad7f.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e4e82d4401c9a7e5ee0751f2105b05ff.png)

### 3.7 虚拟存储器

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f3abbd5b6bb4f14b790668639f67466a.png)

#### 3.7.1 虚拟存储器的基本概念

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5a77af432386424b08fbff64b17b451c.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f9c41b30e2d6fb58dce00d9745c6a488.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/81de9b4847761fad712104c530de4ddf.png)

#### 3.7.5 段页式虚拟存储器

把程序按逻辑结构分段，每段再划分为固定大小的页，  
主存空间也划分为大小相等的页，  
程序对主存的调入、调出仍以页为基本传送单位。  
每个程序对应一个段表，每段对应一个页表  
虚拟地址：段号+段内页号+页内地址

#### 3.7.3 快表（TLB）

页表、段表存放在主存中，收到虚拟地址后要先访问主存，査询页表、段表，进行虚实地址转换。  
放在主存中的页表称为慢表(Page)  
提高变换速度→用高速绥沖存储器存放常用的页表项 → 快表(TLB)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/0b97770f7f074164e3e05e2f2e717343.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/fe6f7bdedd52b3c876b1fc8b4ed5f293.png)

### 3.8 本章开头提出的问题回答

#### 1)存储器的层次结构主要体现在何处？为何要分这些层次？计算机如何管理这些层次？

- 1)存储器的层次结构主要体现在何处？为何要分这些层次？计算机如何管理这些层次？  
      
    存储器的层次结构主要体现在 Cache-主存和 主存-辅存这两个存储层次上。  
    Cache-主存层次在存储系统中主要 对CPU访存起加速作用，即从整体运行的效果分析，CPU访存速度加快，接近于 Cache的速度，而寻址空间和位价却接近于主存。  
    主存-辅存层次在存储系统中主要 起扩容作用，即从程序员的角度看，他所使用的存储器的容量和位价接近于辅存，而速度接近于主存。  
    综合上述两个存储层次的作用，从整个存储系统来看，就达到了速度快、容量大、位价低的优化效果。  
    主存与 Cache之间的信息调度功能全部由硬件自动完成。而主存与辅存层次的调度目前广泛采用虚拟存储技术实现，即将主存与辅存的一部分通过软/硬结合的技术组成虚拟存储器，程序员可用这个比主存实际空间（物理地址空间）大得多的虚拟地址空间（逻辑地址空间）编程，当程序运行时，再由软/硬件自动配合完成虚拟地址空间与主存实际物理空间的转换。因此，这两个层次上的调度或转换操作对于程序员来说都是透明的。

#### 2)存取周期和存取时间有何区别？

- 2)存取周期和存取时间有何区别？  
      
    存取周期和存取时间的主要区别是：存取时间仅为完成一次操作的时间；而存取周期不仅包含操作时间，而且包含操作后线路的恢复时间，即存取周期=存取时间+恢复时间。(这是不是也可以解释，为什么IC前端，时序分析中有建立时间和保持时间吧)

#### 3)在虚拟存储器中，页面是设置得大一些好还是设置得小一些好？

- 3)在虚拟存储器中，页面是设置得大一些好还是设置得小一些好？  
      
    页面不能设置得过大，也不能设置得过小。因为页面太小时，平均页内剩余空间较少，可节省存储空间，但会使得页表增大，而且页面太小时不能充分利用访存的空间局部性来提高命中率；页面太大时，可减少页表空间，但平均页内剩余空间较大，会浪费较多存储空间，页面太大还会使页面调入/调出的时间较长

### 3.9 常见问题

#### 1.存取时间Ta就是存储周期Tm吗？

- 1.存取时间Ta就是存储周期Tm吗？  
      
    不是。存取时间Ta是执行一次读操作或写操作的时间，分为读出时间和写入时间。读出时间是从主存接收到有效地址开始到数据稳定为止的时间；写入时间是从主存接收到有效地址开始到数据写入被写单元为止的时间。  
    存储周期Tm是指存储器进行连续两次独立地读或写操作所需的最小时间间隔。所以存取时间Ta不等于存储周期Tm。通常存储周期Tm大于存取时间Ta。

#### 2. Cache行的大小和命中率之间有什么关系？

- 2.Cache行的大小和命中率之间有什么关系？  
      
    行的长度较大，可以充分利用程序访问的空间局部性，使一个较大的局部空间被一起调到Cache中，因而可以增加命中机会。但是，行长也不能太大，主要原因有两个：  
    1)行长大使失效损失变大。也就是说，若未命中，则需花更多时间从主存读块。  
    2)行长太大， Cache项数变少，因而命中的可能性变小

#### 3.发生取指令 Cache缺失的处理过程是什么？

- 3.发生取指令 Cache缺失的处理过程是什么？  
      
    1)程序计数器恢复当前指令的值。  
    2)对主存进行读的操作。  
    3)将读入的指令写入 Cache中，更改有效位和标记位。  
    4)重新执行当前指令。

#### 4.关于 Cache的一些小知识

- 4.关于 Cache的一些小知识。  
      
    1)**多级 Cache**。现代计算机系统中，一般采用多级的 Cache系统。CPU执行指令时，先到速度最快的一级 Cache( LI Cache)中寻找指令或数据，找不到时，再到速度次快的二级Cache(L2 Cache)中找…最后到主存中找。  
    2)**指令 Cache和数据 Cache**。指令和数据可以分别存储在不同的 Cache中（ LI Cache一般会这么做），这种结构也称哈佛 Cache,其特点是允许CPU在同一个 Cache存储周期内同时提取指令和数据，由于指令执行过程取指和取数据都有可能访问 Cache,因此这一特性可以保证不同的指令同时访存。

## 第四章 指令系统

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/38cc58c1ce2bec9f304e09f788a85de4.png)

### 【复习提示】

指令系统是表征一台计算机性能的重要因素。读者应注意扩展操作码技术，各种寻址方式的特点及有效地址的计算，相对寻址有关的计算，CISC与RISC的特点与区别。本章知识点出选择题的概率较大，但也有可能结合其他章节出有关指令的综合题。2014年、2015年已连续两次出现指令系统和指令[流水线](https://marketing.csdn.net/p/3127db09a98e0723b83b2914d9256174?pId=2782&utm_source=glcblog&spm=1001.2101.3001.7020)的大题。指令系统格式和指令寻址方式与CPU指令执行过程部分紧密结合，希望读者引起重视。

在学习本章时，请读者思考以下问题

- 1)什么是指令？什么是指令系统？为什么要引入指令系统？
- 2)一般来说，指令分为哪些部分？每部分有什么用处？
- 3)对于一个指令系统来说，寻址方式多和少有什么影响？

请读者在本章的学习过程中寻找答案，本章末尾会给出参考答案。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/81010205a74e65933990ea70f53162ec.png)

### 4.1 指令格式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/84c5cd1750210864ba41c3aa3919f377.png)

#### 4.1.1 指令的基本格式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1d61c65da6faac5b836f3436085f3dae.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/419ce356c84616258d4ebd5ae4f435ca.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1a2696ee630520dc60375b04d03b7970.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c0688be496320a5be7fa175a575f11f5.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/cc3eaf7f6de95174d78ff54d23cd55df.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f7a5971655962e71452971fcca486577.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c7a5196737f6af8485b2964490a17436.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7e1e2a33970d1302250647ab026088d5.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/937fa7ab85da4ee5dc9f4db9e2b276ec.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1f75c517891f567f7390e0b76d7612f2.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b8973396eb9b0c346891349287ae39cc.png)

### 4.2 指令寻址方式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c258eabd311e4d2cc8d7039713fc6342.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/6054223d54a68d93d612b319503088e2.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/436714993c877021397d89bda54498e1.png)

#### 4.2.1 指令的寻址方式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1bc4168ee376c803b672b7c8540d3de9.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/543099f53c79ea081de8f095ee20a68e.png)

#### 4.2.2 常见的数据寻址方式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7e59e9b1f74ad756d18b5aaf401134df.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8b19d1d157adbaa801c3329817a094f5.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2f2f2f6d12e113f0e1d842939394f990.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c8a51322792a2150229760761f4a6bc8.png)

##### 隐含寻址

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c0ba496ce8493ae5a1a16284f381b8fa.png)

##### 立即寻址

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e64d310a7a0443fec14696381dac205d.png)

##### 直接寻址

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1c739c579e97a32657537fdece969d25.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5ba2480bc61e256a32485bca3d1f7f33.png)

##### 间接寻址

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/13284dc5af3f16b6e56ed8a4f9b43d90.png)

##### 寄存器寻址

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d5fc115821143fa467c5d4e52e75170d.png)

##### 寄存器间接寻址

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c0064546bd38c444bf9fedd9552453a5.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/75e9b3ed1fbf807079738ec0b2df3604.png)

##### 偏移寻址

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d147700ae7bdecf4ff505641e02f2c9c.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9ad3f6c1967b3c7fa2f45452a1ba98ba.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7543529c3c21c0feb3d4a21f13054fc3.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/866b9e708a9cc52e301ecf03f2599f0f.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/efa56f0dfb69a9ca39c063e720e54d89.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/6b558ebd13c78627ac2fbb13b7e4ed77.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/084482b600858043491687e5e58f4374.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/60e4063e45a4f21dd630cea26a77880d.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/eff6e861ca16d60062ae1d9b7f328d6a.png)

##### 堆栈寻址

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a25fa8c9f058fc7a242b9d95f0af0f61.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e3c278803ff7c329b65b05dca4684c1b.png)

### 4.3 CISC和RISC的基本概念

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/521b9fa42bd7717db9cbd768d8490dd4.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/78b5c4bb2be66800e5a1a9fee49e1abb.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/250c7728f0f9edd6a3ff2f71bdc96705.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3488a8c3ecf52fab34f913a2379ea4a0.png)

### 4.4本章开头提出的问题回答

#### 1)什么是指令？什么是指令系统？为什么要引入指令系统？

- 1)什么是指令？什么是指令系统？为什么要引入指令系统？  
      
    指令就是要计算机执行某种操作的命令，一台计算机中所有机器指令的集合，称为这台计算机的指令系统。引入指令系统后，避免了用户与二进制代码直接接触，使得用户编写程序更为方便。另外，**指令系统**是表征一台计算机性能的重要因素，它的格式与功能不仅直接影响到机器的硬件结构，而且也直接影响到系统软件，影响到机器的适用范围。

#### 2)一般来说，指令分为哪些部分？每部分有什么用处？

- 2)一般来说，指令分为哪些部分？每部分有什么用处？  
      
    一条指令通常包括操作码字段和地址码字段两部分。其中，操作码指出指令中该指令应该**执行什么性质的操作和具有何种功能**，它是识别指令、了解指令功能与区分操作数地址内容的组成和使用方法等的关键信息。地址码用于给出被操作的信息（指令或数据）的地址，包括参加运算的一个或多个操作数所在的地址、运算结果的保存地址、程序的转移地址、被调用子程序的入口地址等。

#### 3)对于一个指令系统来说，寻址方式多和少有什么影响？

- 3)对于一个指令系统来说，寻址方式多和少有什么影响？  
      
    寻址方式的多样化能让用户编程更为方便，但多重寻址方式会造成CPU结构的复杂化（详见下章），也不利于指令流水线的运行。而寻址方式太少虽然能够提高CPU的效率，但对于用户而言，少数几种寻址方式会使编程变得复杂，很难满足用户的需求。

### 4.5常见问题

#### 1.简述各常见指令寻址方式的特点和适用情况

- 1.简述各常见指令寻址方式的特点和适用情况  
      
    立即寻址操作数获取便捷，通常用于给寄存器赋初值。  
    直接寻址相对于立即寻址，缩短了指令长度  
    间接寻址扩大了寻址范围，便于编制程序，易于完成子程序返回。  
    寄存器寻址的指令字较短，指令执行速度较快  
    寄存器间接寻址扩大了寻址范围。  
    基址寻址扩大了操作数寻址范围，适用于多道程序设计，常用于为程序或数据分配存储空间。  
    变址寻址主要用于处理数组问题，适合编制循环程序。  
    相对寻址用于控制程序的执行顺序、转移等。  
    基址寻址和变址寻址的区别：两种方式有效地址的形成都是寄存器内容+偏移地址，但是在基址寻址中，程序员操作的是偏移地址，基址寄存器的内容由操作系统控制，在执行过程中是动态调整的；而在变址寻址中，程序员操作的是变址寄存器，偏移地址是固定不变的。

#### 2.一个操作数在内存可能占多个单元，怎样在指令中给出操作数的地址？

- 2.一个操作数在内存可能占多个单元，怎样在指令中给出操作数的地址？  
      
    现代计算机都采用字节编址方式，即一个内存单元只能存放一字节的信息。一个操作数（如char、int、foat、 double)可能是8位、16位、32位或64位等，因此可能占用1个、2个、4个或8个内存单元。也就是说，一个操作数可能有多个内存地址对应。  
    有两种不同的地址指定方式：大端方式和小端方式。  
    大端方式：指令中给出的地址是操作数最高有效字节(MSB)所在的地址  
    小端方式：指令中给出的地址是操作数最低有效字节(LSB)所在的地址。

#### 3.装入/存储(Load/ Store)型指令有什么特点？

- 3.装入/存储(Load/ Store)型指令有什么特点？  
      
    装入/存储型指令是用在规整型指令系统中的一种通用寄存器型指令风格。这种指令风格在RISC指令系统中较为常见。为了规整指令格式，使指令具有相同的长度，规定只有 Load/Store指令才能访问内存。而运算指令不能直接访问内存，只能从寄存器取数进行运算，运算的结果也只能送到寄存器。因为寄存器编号较短，而主存地址位数较长，通过某种方式可使运算指令和访存指令的长度一致。  
    这种装入/存储型风格的指令系统的最大特点是，指令格式规整，指令长度一致，一般为32位。由于只有 Load/Store指令オ能访问内存，程序中可能会包含许多装入指令和存储指令，与ー般通用寄存器型指令风格相比，其程序长度会更长。

## 第五章 中央处理器

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/58ba8b3e503f790ae69636250d07dc71.png)

### 【复习提示】

中央处理器是计算机的中心，也是本书的难点。其中，数据通路的分析、指令执行阶段的节拍与控制信号的安排、流水线技术与性能分析易出综合题。而关于各种寄存器的特点、指令执行的各种周期与特点、控制器的相关概念、流水线的相关概念也极易出选择题。

在学习本章时，请读者思考以下问题

- 1)CPU分为哪几部分？分别实现什么功能？
- 2)指令和数据均存放在内存中，计算机如何从时间和空间上区分它们是指令还是数据？
- 3)什么是指令周期、机器周期和时钟周期？它们之间有何关系？
- 4)指令周期是否有一个固定值？为什么？
- 5)什么是微指令？它和第4章谈到的指令有什么关系？
- 6)什么是指令流水线？指令流水线相对于传统计算机体系结构的优势是什么？如何计算指令流水线的加速比？

请读者在本章的学习过程中寻找答案，本章末尾会给出参考答案。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d8e847680f932b30a8206a49a13afe9f.png)  
【复习提示】  
中央处理器是计算机的中心，也是本书的难点。其中，数据通路的分析、指令执行阶段的节拍与控制信号的安排、流水线技术与性能分析易出综合题。而关于各种寄存器的特点、指令执行的各种周期与特点、控制器的相关概念、流水线的相关概念也极易出选择题。

在学习本章时，请读者思考以下问题：

- 1)CPU分为哪几部分？分别实现什么功能？
- 2)指令和数据均存放在内存中，计算机如何从时间和空间上区分它们是指令还是数据？
- 3)什么是指令周期、机器周期和时钟周期？它们之间有何关系？
- 4)指令周期是否有一个固定值？为什么？
- 5)什么是微指令？它和第4章谈到的指令有什么关系？
- 6)什么是指令流水线？指令流水线相对于传统计算机体系结构的优势是什么？如何计算指令流水线的加速比？

请读者在本章的学习过程中寻找答案，本章末尾会给出参考答案。

### 5.1 CPU的功能和基本构造

#### 5.1.1 CPU的基本功能

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8887a78c611e9abca6499ff017774759.png)  
CPU的功能:

1. 指令控制：完成取指令、分析指令和执行指令的操作，即程序的顺序控制。
2. 操作控制：一条指令的功能往往是由若干操作信号的组合来实现的。CPU管理并产生由内存取出的每条指令的操作信号，把各种操作信号送往相应的部件，从而控制这些部件按指令的要求进行动作。
3. 时间控制：对各种操作加以时间上的控制。时间控制要为每条指令按时间顺序提供应有的控制信号。
4. 数据加工：对数据进行算术和逻辑运算。
5. 中断处理：对计算机运行过程中出现的异常情况和特殊请求进行处理。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/aaa18a82ae3cb12ba92e7f8531bcefb5.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/da3b184788bd3773e859133dd09012c4.png)

#### 5.1.2 CPU的基本结构

##### 1.运算器

- 算术逻辑单元ALU
- 累加寄存器ACC
- 程序字状态寄存器PSW
- 计数器CT
- 暂存寄存器
- 通用寄存器组
- 移位器

> 通用寄存器供用户自由编程，可以存放数据和地址。而指令寄存器是专门用于存放指令的专用寄存器，不能由通用寄存器代替。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/fae03aa074b4b9a09cf9cf09ed660a43.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/287e017912bdbb3ec75147b43ddc6d0b.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a6f38511d7890009ea3740bd17943c57.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b4cb890ab03901567f621985ff592b17.png)

##### 2.控制器

- 程序计数器PC:存放下一条指令在主存中的地址，具有自增功能。
- 指令寄存器IR：存放当前正在执行的指令。
- 指令译码器
- 存储器地址寄存器MAR
- 存储器数据寄存器MDR
- 时序系统
- 微操作信号发生器

> 条件转移指令执行时，需要对标志寄存器的内容进行测试，判断是否满足转移条件。  
> 转移指令时，需要判断转移是否成功，若成功则PC修改为转移指令的目标地址，否则下一条指令的地址仍然为PC自增后的地址。  
>   
> 指令包括操作码字段和地址码字段，但指令译码器仅对操作码字段进行译码，借以确定指令的操作功能。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c6484401fcb28d878b63f0176a0580af.png)

> 注意：CPU内部寄存器大致可分为两类：一类是用户可见的寄存器，可对这类寄存器编程，如通用寄存器组、程序状态字寄存器；另一类是用户不可见的寄存器，对用户是透明的，不可对这类寄存器编程，如存储器地址寄存器MAR、存储器数据寄存器MDR、指令寄存器IR。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/535fda17371b61b50baf898ed66bce1e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9b4960cfc23e3fb1295473a5bb98d473.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/4c57d50cc63ac5b9b2248ba3abcf3582.png)

### 5.2 指令执行过程

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8bc1466fec32beb63ba6abe5fd065b4e.png)

#### 5.2.1 指令周期

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/be6c5d432d1d33e2b871e834ea7cb20c.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5b8a69582fd09f838f9e91cb3827b45c.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3ab163ed352d807f24d2ce60b1bc6942.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/67e563f8a71462ce45e9f09b1834cae2.png)

#### 5.2.2 指令周期的数据流

##### 取指周期

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c5ceff10409c85736d6e4350f910c007.png)

##### 间址周期

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7b921808962525a47fcd9bf538953923.png)

> 间址周期的作用是取操作数的有效地址，因此间址周期结束后，MDR的内容为操作数地址。

##### 执行周期

根据IR中的指令字的操作码和操作数通过ALU操作产生执行结果。不同指令的执行操作不同，因此没有统一的数据流向。

##### 中断周期

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a83a87c62e6f2c50411c495132a088fa.png)

#### 5.2.3 指令执行方案

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/551999c3275f668e696b2d796574bca1.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/31cac4d1690377144da6a0b020295ad1.png)

### 5.3 数据通路的功能和基本结构

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3fb867c4a58fe798da4bf3f5d04be4e6.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/4a43f4b802997a9a35208741932deec7.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c67f3c0e9cff82f8931453dbac2d21ba.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/01dd54c2fc4dc7a6500251e5acb8f14f.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5e3261821d869a8fb89356a2f0f187b2.png)  
实际考试中，建议把间址周期合并到执行周期，因为每个人对间址周期的理解是不一样的  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c92e0662211ebb51dcec3bdf57b0d0b9.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5c80558dff3ac7a5e4aaf1c338abe21b.png)

##### 专用数据通路方式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/cd4a3cb9a72bd3ecc2e9c35519915229.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/167a7987f0071a8b2f5de46cd7799f67.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/4e85b380cd8012b601a59a5c324f5b46.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/dacb1413ab41790a291349ccdcd1e1dd.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/4be67d23ce4696ffaf53dd3cf0d05a3b.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/85f47e88beef2967fb57907f36cb26d9.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5289c3987120ce749ee0141ba4c33b4c.png)  
注意ALU不是通用寄存器？  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/78fb7dfe264e9dd143cf08875d89914f.png)

### 5.4 控制器的功能和工作原理

#### 5.4.1 控制器的结构和功能

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/30ba1dba69f70a4eee23ec807e881753.png)  
控制器是计算机系统的指挥中心，控制器的主要功能有：

- 1)从主存中取出一条指令，并指出下一条指令在主存中的位置。
- 2)对指令进行译码或测试，产生相应的操作控制信号，以便启动规定的动作。
- 3)指挥并控制CPU、主存、输入和输出设备之间的数据流动方向。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b3ca171f9f422189d215963a1add8de5.png)

#### 5.4.2 硬布线控制器

##### 1. 硬布线控制单元图

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/12b66426f29437c2fb1b2e152cb6be97.png)

##### 2.硬布线控制器的时序及微操作

##### 3.CPU控制方式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/0b61a8e8885c455ac21019a20ebcf985.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2ecdd3720908fb3b9204e78226e05590.png)

##### 4.硬布线控制单元设计步骤

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/48f2ad2ac3d1a72b02219e54ed5548c8.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8ce86d7aeb563c7494b7d3db27c0ff88.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1d841fa597433db6ce108ff03f4c1db6.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/fe7625cfbafaffc0a069e7b4b7a10ca0.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1ba34a89c6837d4f39a7596645929039.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/87989a935cffa0afc5b6e3c29407b0dc.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/211aa79f5be1f26e809c1736140ae25b.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f894f6a6672e35a1eb8e653e8e87bef7.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8c17afdda2c3a6cc82b07607e0e819c6.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a93246aa435d616379c2e458a15fdf6a.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/fcf67eda6bed300a61efa8572a12d898.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/43d4f9d28ca2202353a1a53c43ac488f.png)

#### 5.4.3 微程序控制器

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a188fcfd049c5d5d6790d37c821d6c11.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/6addb7105642f97d9e2364e2c51fd218.png)

##### 1.微程序控制的基本概念

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f001438f4308cb94807682d0e5bf6b38.png)

##### 2.微程序控制组成和工作过程

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c0d5e6f7f97adf95a8ec3e45853a1049.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/66cb6887a09fae211b661cec32aafd9a.png)

##### 5.微指令的格式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d93a4a73b396e3c6cf50473c04d85df6.png)

##### 3.微指令的编码方式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/fe442adb3e24e378867c644cd11a8fdb.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2778ea44ae80a99ec377615a25e64fbc.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e9a0297273f655e49fd6c5345c5a4381.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c246e54168d9c62c51ae9ca29f757d84.png)

##### 4.微指令的地址形成方式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/40d4631c7eaac5baffb9c051097abcd4.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/bc63b024b5ff6e0937b33fa11fdeadd1.png)

##### 6.微程序控制单元的设计

设计步骤：

1. 分析每个阶段的微操作序列
2. 写出对应机器指令的微操作命令及节拍安排
3. 确定微指令格式
4. 编写微指令码点

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/14343b7cd10890b8e5a5fff47fcf7fd9.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5ba029a9f1ed013ee04ccc4a3aab1379.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a8ab556087c4ccf32cb58d27c98aa0a8.png)

##### 7. 动态微程序设计和毫微程序设计

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/0617f313a0c18f70d04f812e53dac55e.png)

##### 8.硬布线和微程序控制器的特点

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/87b088ba1bfc71af81d19c9d2a299f61.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/72bcc4a29fb62e53c6250d7f191673a1.png)

### 5.5 指令流水线

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c6b8b68cb0c911b7dff09182c70fe732.png)

#### 5.5.1 指令流水的基本概念

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2f76ef54f008adea095fe5d1315ac6f9.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/4157ae43572c17a7fee7cd520cf9a117.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ff0d89bfd5392091e50ed57ee414eb10.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/289c164ea6ee7ca01fbd4d4536fa8259.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c2c3058a80c4321b31aedca3fe74726d.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1932600c96f90238ad535d9539856b19.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/88e89321a3acd94f9a26d6cc127a6e92.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9eaf0756394a1fe6532f9e5242e9c6c4.png)

#### 5.5.3 影响流水线的因素

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d706a8048acbf76a47e32b0324fd37c7.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/292b79640b494adf74956e2156fa289e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/aa1274509ba0e48c2ca01cf6f6f94a2d.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/0a608c642ea86297c780750df379715d.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/931a69cec2b41e48a7f7c1bc4f5356b4.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/95530388d581f6f24ee2b2b1f9982237.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1a441cc6aaf15676cb32265ece49884e.png)

##### 5.5.2 流水线的分类

1.部件功能级、处理机级和处理机间级流水线

- 根据流水线使用的级别的不同，流水线可分为部件功能级流水线、处理机级流水线和处理机间流水线。
- 部件功能级流水就是将复杂的算术逻辑运算组成流水线工作方式。例如，可将浮点加法操作分成求阶差、对阶、尾数相加以及结果规格化等4个子过程。
- 处理机级流水是把一条指令解释过程分成多个子过程，如前面提到的取指、译码、执行、访存及写回5个子过程。
- 处理机间流水是一种宏流水，其中每一个处理机完成某一专门任务，各个处理机所得到的结果需存放在与下一个处理机所共享的存储器中。

2.单功能流水线和多功能流水线

- 按流水线可以完成的功能，流水线可分为单功能流水线和多功能流水线。
- 单功能流水线指只能实现一种固定的专门功能的流水线；
- 多功能流水线指通过各段间的不同连接方式可以同时或不同时地实现多种功能的流水线。

3.动态流水线和静态流水线

- 按同一时间内各段之问的连接方式，流水线可分为静态流水线和动态流水线。
- 静态流水线指在同一时间内，流水线的各段只能按同一种功能的连接方式工作。
- 动态流水线指在同一时间内，当某些段正在实现某种运算时，另一些段却正在进行另一种运算。这样对提高流水线的效率很有好处，但会使流水线控制变得很复杂。  
    4.线性流水线和非线性流水线
- 按流水线的各个功能段之间是否有反馈信号，流水线可分为线性流水线与非线性流水线。
- 线性流水线中，从输入到输出，每个功能段只允许经过一次，不存在反馈回路。
- 作线性流水线存在反馈回路，从输入到输出过程中，某些功能段将数次通过流水线，这种流水线适合进行线性递归的运算。

#### 5.5.5 超标量流水线的基本概念

##### 1.超标量流水技术

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f7f33db5767728afe6be416440614796.png)

##### 2.超流水技术

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3ef39444a456a4e7dd2f69a3d91b46ae.png)

##### 3.超长指令集

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b10e1b64285e8b2e94a332fdf4f047e1.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9cbe8d5d404bf4eede66300181c24969.png)

### 5.6本章开头提出的问题回答

#### 1)CPU分为哪几部分？分别实现什么功能？

- 1)CPU分为哪几部分？分别实现什么功能？  
      
    CPU分为运算器和控制器。其中运算器主要负责数据的加工，即对数据进行算术和逻辑运算控制器是整个系统的指挥中枢，对整个计算机系统进行有效的控制，包括指令控制、操作控制、时间控制和中断处理。

#### 2)指令和数据均存放在内存中，计算机如何从时间和空间上区分它们是指令还是数据？

- 2)指令和数据均存放在内存中，计算机如何从时间和空间上区分它们是指令还是数据？  
      
    从时间上讲，取指令事件发生在“取指周期”，取数据事件发生在“执行周期”。从空间上讲，从内存读出的**指令流**流向控制器（指令寄存器），从内存读出的**数据流**流向运算器（通用寄存器）。

#### 3)什么是指令周期、机器周期和时钟周期？它们之间有何关系？

- 3)什么是指令周期、机器周期和时钟周期？它们之间有何关系？  
      
    CPU每取出并执行一条指令所需的全部时间称为指令周期；机器周期是在同步控制的机器中，执行指令周期中一步相对完整的操作（指令步）所需的时间，通常安排机器周期长度=主存周期；时钟周期是指计算机主时钟的周期时间，它是计算机运行时最基本的时序单位，对应完成一个微操作所需的时间，通常时钟周期=计算机主频的倒数

#### 4)指令周期是否有一个固定值？为什么？

- 4)指令周期是否有一个固定值？为什么？  
      
    由于计算机中各种指令执行所需的时间差异很大，因此为了提高CPU的运行效率，即使在同步控制的机器中，不同指令的指令周期长度都是不一致的，即指令周期对不同的指令来说不是个固定值。

#### 5)什么是微指令？它和第4章谈到的指令有什么关系？

- 5)什么是微指令？它和第4章谈到的指令有什么关系？  
      
    控制部件通过控制线向执行部件发出各种控制命令，通常把这种控制命令称为微命令，而一组实现一定操作功能的微命令的组合，构成一条微指令。许多条微指令组成的序列构成微程序，微程序完成对指令的解释执行。指令，即指机器指令。每条指令可以完成一个独立的算术运算或逻辑运算操作。在采用微程序控制器的CPU中，一条指令对应一个微程序，一个微程序由许多微指令构成，一条微指令会发出很多不同的微命令。

#### 6)什么是指令流水线？指令流水线相对于传统计算机体系结构的优势是什么？如何计算指令流水线的加速比？

- 6)什么是指令流水线？指令流水线相对于传统计算机体系结构的优势是什么？如何计算指令流水线的加速比？  
      
    指令流水线是把指令分解为若干子过程，通过将每个子过程与其他子过程并行执行，来提高计算机的吞吐率的技术。采用流水线技术只需增加少量硬件就能把计算机的运算速度提高几倍，因此成为计算机中普遍使用的一种并行处理技术，通过在同一个时间段使用各功能部件，使得利用率明显提高。  
    流水线的加速比指的是完成同样一批任务，不使用流水线所用的时间与使用流水线所用的时间之比。一条k段流水线理论上的最大加速比为Smax=k。因此，在现代计算机中提高流水线段数有利于提高计算机的吞吐量。具体的加速比要使用时空图来计算。

### 5.7 常见问题

#### 1.流水线越多，并行度就越高。是否流水段越多，指令执行越快？

- 1.流水线越多，并行度就越高。是否流水段越多，指令执行越快？  
      
    错误，因为如下：  
    1)流水段缓冲之间的额外开销增大。每个流水段有一些额外开销用于缓冲间传送数据、进行各种准备和发送等功能，这些开销加长了一条指令的整个执行时间，当指令间逻辑上相互依赖时，开销更大。  
    2)流水段间控制逻辑变多、变复杂。用于流水线优化和存储器（或寄存器）冲突处理的控制逻辑将随流水段的增加而大增，这可能导致用于流水段之间控制的逻辑比段本身的控制逻辑更复杂。

#### 2.有关指令相关、数据相关的几个概念

- 2.有关指令相关、数据相关的几个概念  
      
    1)两条连续的指令读取相同的寄存器时，会产生读后读( Read After Read,RAR)相关，这种相关不会影响流水线。  
    2)某条指令要读取上一条指令所写入的寄存器时，会产生写后读( Read After Write,RAW)相关，它称数据相关或真相关，影响流水线。按序流动的流水线只可能出现RAW相关。  
    3)某条指令的上条指令要读/写该指令的输出寄存器时，会产生读后写（ Write After Read,WAR)和写后写( Write After Write,WAW)相关。在非按序流动的流水线中，既可能发生RAW相关，又可能发生WAR相关和WAW相关。  
    **对流水线影响最严重的指令相关是数据相关。**

## 第六章 总线

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5f28c1c408645a41f366cabf2d34944b.png)

### 【复习提示】

本章的知识点较少，其中总线仲裁及总线操作和定时方式是难点。本章内容通常以选择题的形式出现，特别是系统总线的特点、性能指标、各种仲裁方式的特点、异步定时方式及常见的总线标准和特点等。总线带宽的计算也可能结合其他章节出综合题

在学习本章时，请读者思考以下问题：

- 1)引入总线结构有什么好处？
- 2)引入总线结构会导致什么问题？如何解决？

请读者在学习本章的过程中寻找答案，本章末尾会给出参考答案。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5916e975f18ee0a2245209d01c199553.png)

### 6.1 总线的概述

#### 6.1.1 总线基本概念

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/6fd8d964a90373236e9f8453544e000e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f5344cebe11a09e548e3d79b77b81c2a.png)

##### 3.总线的特性

1. 机械特性：尺寸、形状、管脚数、排列顺序
2. 电气特性：传输方向和有效的电平范围
3. 功能特性：每根传输线的功能(地址、数据、控制)
4. 时间特性：信号的时序关系

#### 6.1.2 总线的分类

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/aa28f0506eb6694312b7ba056391c81e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/691993456dfbd5d196f1578ff6d85831.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9999374edbf1ac75ac53f5dec36c2c79.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/add9b55e065cbcbdceba6a456e1ce8a4.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/4ce7ab64298cecfb58cd5ed4e54e9448.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d440bcdc557c02c414b84bc788ae4d8d.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d211741cd73672cf62ffdbb997bca555.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7ec91e961f65f45b2aa3344eb9de5dbb.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3b7fe79dc6f575a9af33ed58ff2a09e5.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5c157e3e703004587b4b3ae40c2d6a79.png)

#### 6.1.4 总线的性能指标

总线的性能指标  
1.总线的传输周期（总线周期）  
2.总线时钟周期  
3.总线的工作频率  
4.总线的时钟频率  
5.总线宽度  
6.总线带宽  
7.总线复用  
8.信号线数

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/4f2c30261423daf1b9cea64a5b74058b.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9f78f9493a8bd6e6829df69eba2549e5.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/26ace8aa4e70b96e9b141636673f9e9c.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7e90b8cf5ead239b9c48671765c54da8.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/993112ee324e94b223b33dd1a77ddc99.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/05249cbc50c889b31d55be542244e880.png)

### 6.2 总线仲裁

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/09c1a3a00ba9f6f4dc3b590bbcf3c2be.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/76bbead44e42de880714c1947a44320b.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a51a6d236c3a84cbf4e2cf1fe44bf905.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/321650dd4ecbce5a20c107f9f6149cff.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/49791ebf2550ea87328a5194bb21a3bf.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ae84a5a7bad7fc6f13601d0b67b8bc63.png)

#### 6.2.2 分布仲裁方式

特点：不需要中央仲裁器，每个潜在的主模块都有自己的仲裁器和仲裁号，多个仲裁器竞争使用总线。

- 当设备有总线请求时，它们就把各自唯一的仲裁号发送到共享的仲裁总线上
- 每个仲裁器将从仲裁总线上得到的仲裁号与自己的仲裁号进行比较；
- 如果仲裁总线上的号优先级高，则它的总线请求不予响应，并撤销它的仲裁号；
- 最后，获胜者的仲裁号保留在仲裁总线上。

### 6.3 总线操作和定时

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b7c98bc71fd55fc6ad8b9b1ea4b9f479.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/246feca7c9778bb645b5d2d8beb7ff45.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a5b0c19156eb6c1542a15ca2b9777f8e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/0378808ddbbeff94d458646bd7394d75.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b13f61a8c3f6b48d9abcf015005845b6.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a8aa2bcc85dcd06e2b2ae46427832756.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8cf895b403ae1d9eccfa7980a6dcc142.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8524bf3b9207a448f7a33a7a81ba426e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/14234f8f7d257d2f95bd5fe494193ab9.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/cc943d1c8f23f5cbe96a76e7973e3896.png)

### 6.4 总线标准

总线标准的基本概念：

- 总线标准是国际上公布或推荐的互连各个模块的标准，它是把各种不同的模块组成计算机系统时必须遵守的规范。按总线标准设计的接口可视为通用接口，在接口的两端，任何一方只需根据总线标准的要求完成自身方面的功能要求，而无须了解对方接口的要求。
    
- 系统总线标准：ISA、EISA、VESA、PCI、PCI- Express等。
    
- 设备总线标准：IDE、AGP、RS-232C、USB、SATA、SCSI、 PCMCIA等。
    
- 局部总线标准：在ISA.总线和CPU总线之间增加的一级总线或管理层，如PCI、PCI-E、VESA、AGP等，可以节省系统的总带宽。
    
- 即插即用( Plug-and-Play)的作用是自动配置（低层）计算机中的板卡和其他设备，然后告诉对应的设备都做了什么。把物理设备和软件（设备驱动程序）相配合，并操作设备，在每个设备和它的驱动程序之间建立通信信道
    
- 热插拔( hot-plugging或 Hot Swap)即带电插拔，热插拔功能就是允许用户在不关闭系统，不切断电源的情况下取出和更换损坏的硬盘、电源或板卡等部件，从而提高了系统对灾难的及时恢复能力、扩展性和灵活性等，例如一些面向高端应用的磁盘镜像系统都可以提供磁盘的热插拔功能。
    

#### 6.4.1 常见的总线标准

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1b0a81d8a02f10a8b30fefd4c96f7903.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c513b1aa61d1647c1960e2cfdc74d6f0.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ca83309b19693738a2a9eda9f5110b2d.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/19d6f0b51a502ebef3936f3d06f61481.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8157100717a16b496126270fc24da498.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/aa3d2c290d2d24aeab848e77e5f37780.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2ad35bf546f30bdece5e71358c3a7076.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b0aed4e8a69aa161e6faac5d051dcc50.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f539fe22fff5b22c564be1b4b82a07e8.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/75ae4db8f774841608c4bd7cbf472957.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ba521e0b3f28e8e2f4570b89fb1d2682.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a05dcbc6418b83bfe9591b462e1d2c40.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/845a551dfe09e105202c2d414744d7f2.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7ba8da0f165234bb9540153f0cc49dec.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c6e65cb51dfbfcb6a16e7f2234a5a0bd.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a3c37ab186dec06a6d01c273cf7e55b7.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ef692b439d67499f867314e9c59fc7db.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d75c72014902675d068450a7abdc0991.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1b5041eb11660f8a7acc88180bc71733.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ff4cea05df9180e6f01d45f690804112.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/03fa4fc1d8b562655054a9891511b24b.png)

### 6.5本章开头提出的问题回答

#### 1)引入总线结构有什么好处？

- 1)引入总线结构有什么好处？  
      
    引入总线结构主要有以下优点  
    ①简化了系统结构，便于系统设计制造。  
    ②大大减少了连线数目，便于布线，减小体积，提高系统的可靠性  
    ③便于接口设计，所有与总线连接的设备均采用类似的接口。  
    ④便于系统的扩充、更新与灵活配置，易于实现系统的模块化  
    ⑤便于设备的软件设计，所有接口的软件对不同的接口地址进行操作。  
    ⑥便于故障诊断和维修，同时也能降低成本。

#### 2)引入总线会导致什么问题？如何解决？

- 2)引入总线会导致什么问题？如何解决？  
      
    引入总线后，总线上的各个设备分时共享同一总线，当总线上多个设备同时要求使用总线时就会导致总线的冲突。为解决多个主设备同时竞争总线控制权的问题，应当采用总线仲裁部件，以某种方式选择一个主设备优先获得总线控制权，只有获得了总线控制权的设备才能开始数据传送。

### 6.6 常见问题

#### 1.同一个总线不能既采用同步方式又采用异步方式通信吗？

- 1.同一个总线不能既采用同步方式又采用异步方式通信吗？  
      
    半同步通信总线可以。这类总线既保留了同步通信的特点，又能采用异步应答方式连接速度相差较大的设备。通过在异步总线中引入时钟信号，其就绪和应答等信号都在时钟的上升沿或下降沿有效，而不受其他时间的信号干扰。  
    例如，某个采用半同步方式的总线总是从某个时钟开始，在每个时钟到来时，采样Wait信号，若无效，则说明数据未准备好，下个时钟到来时，再采样Wait信号，直到检测到有效，再去数据线上取数据。PCI总线也是一种半同步总线，它的所有事件都在时钟下降沿同步，总线设备在时钟开始的上升沿采样总线信号。

#### 2.一个总线在某一时刻可以有多对主从设备进行通信吗？

- 2.一个总线在某一时刻可以有多对主从设备进行通信吗？  
      
    不可以。在某个总线周期内，总线上只有一个主设备控制总线，选择一个从设备与之进行通信（即一对一的关系），或对所有设备进行广播通信（即一对多的关系）。所以一个总线在某一时刻不能有多对主从设备进行通信，否则会发生数据冲突。

## 第七章 输入/输出系统

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/89b312753491f36b57eb397875297794.png)

### 【复习提示】

I/O方式是本章的重点和难点，每年不仅会以选择题的形式考查基本概念和原理，而且可能会以综合题的形式考査，特别是各种IO方式效率的相关计算，中断方式的各种原理、特点、处理过程、中断屏蔽，DMA方式的特点、传输过程、与中断方式的区别等。

在学习本章时，请读者思考以下问题

- 1)IO设备有哪些编址方式？各有何特点？
- 2)CPU响应中断应具备哪些条件？

请读者在学习本章的过程中寻找答案，本章末尾会给出参考答案。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8a96e22c01fb28276a5ecd97d2684f02.png)  
【复习提示】  
I/O方式是本章的重点和难点，每年不仅会以选择题的形式考査基本概念和原理，而且可能会以综合题的形式考査，特别是各种IO方式效率的相关计算，中断方式的各种原理、特点、处理过程、中断屏蔽，DMA方式的特点、传输过程、与中断方式的区别等。  
在学习本章时，请读者思考以下问题：

- 1)I/O设备有哪些编址方式？各有何特点？
- 2)CPU响应中断应具备哪些条件？

请读者在学习本章的过程中寻找答案，本章末尾会给出参考答案。

### 7.1 I/O系统基本概念

#### 7.1.1 输入/输出系统

输入、输出是以主机为中心谈论的！输入、输出设备都属于外部设备  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f9f1c826b711e0b8c287e3e591e3ac7e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a93b2bfbf428c29558c53b77dc1bf88b.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f81d475b276b8725cd0e30ba893c6cf4.png)

#### 7.1.2 I/O控制方式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9e30541718d570f3b3e5844c3ffeeea0.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d303c36b1bfe4a664ac96a69f842707a.png)

#### 7.1.4 解析

1. I/O设备不可能直接与主板总线相连，它总是通过设备控制器来相连的
2. I/O指令是指令系统的一部分，是机器指令的一类，但其为了反映与I/O设备交互的特点，格式和其他通用指令相比有所不同。
3. 通道程序存放在主存而非通道中，由通道从主存中取出并执行。通道程序由通道执行，且只能在具有通道的I/O系统中执行

### 7.2 外部设备

- 外部设备  
    外部设备也称外围设备，是除了主机以外的、能直接或间接与计算机交换信息的装置。  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/75ec6e3ea3ca92585568e378371166e0.png)

#### 7.2.1 输入设备

用于向计算机系统输入命令和文本、数据等信息的部件。键盘和鼠标是最基本的输入设备。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7832e295de6d158be48f7307ccf26f9e.png)

#### 7.2.2 输出设备

用于将计算机系统中的信息输出到计算机外部进行显示、交换等的部件。显示器和打印机是最基本的输出设备。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b57602e0aac804760007b4bfbe9df3fb.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e9046c3217824577f71224a08d8fdc34.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/557aa8f30cd76486f20f5a6709406416.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e95129e25c736aa8b5ced22ccfa0a1af.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7a4d58f8f9246691465df38560451237.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a0e92011ac25a5ddd94b9d4113d8df24.png)  
打印机从打字原理的角度可以分为：击打式和非击打式！  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/56b99a5560029c9a16e728499bf676a9.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2be6f3a2de6a8eefb07d64173af4d4c9.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5b0549b01fabfa78eaa6a25d0486133f.png)

#### 7.2.3 外存设备

是指除计算机内存及CPU缓存等以外的存储器。硬磁盘、光盘等是最基本的外存设备。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ad642856bf8d8e75647216e7482e2dd2.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/4b6fa248ffd385f4ec1ef02eec3d8eae.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e893600ddd0c84c7e09d22249166981d.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/be157a843edb8db24739cdba1af92b19.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/24e07ebbe5eecbb4c55dafa3cf7c35f0.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/345c625bf281063f06d26619b2331e99.png)  
串行：不能同时写和读！  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/85486e5c68aa6424b8e70b8d96fb4cec.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a9f663bc1773e3b5791c98dac788d24a.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c85ad2e87ee242ddd8370d56b304ed78.png)

##### 3.光盘存储器

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/bba4b7f0a47cce0da37a1940ce79825d.png)

##### 4.固态硬盘

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/434b84ba4ff85531c15efecdfe66e0b5.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/33a4b6f97f1aa414f94628f4a11d8f66.png)

#### 7.2.5 解析

- 存取一个扇区的平均延迟时间为旋转半周的时间。
- 磁盘存储器的最小读写单位为一个扇区，即磁盘按块存取。

### 7.3 I/O接口

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/813226b2fe2741ea5d7b0393b6b50a51.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/78c7abce108a1db18a425c5cb4206fe8.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/240542ac1c62af0627e5c086d6550c64.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/eba3e6ef512b32f7a6ba95d959cc942a.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/23b9de4a95d5810c3d21f428dd1ad007.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/4d8d540cd17d99b57f5ef2b07026ae10.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/34134ac49576c97cfe26df17c055d341.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/340102830d9032fb26646975c74d8032.png)

### 7.4 I/O方式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/56f840da6c150325ca166e710aad586d.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3b0debe1fefb1c6ae0085bf188d19273.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/321d6ceacc9a91d52744e06c0f40f2c2.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7e941237fcefb819b969bc9643610cd5.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/0dd8e409b5b59255f201ff9bd0ce411f.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/1f2b5a61b6c09003931d25f7538c53ea.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/849091f751b49ffed97337d1fbf48bb0.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d22805bf266ef99f5899ba7d56f70195.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b75c4eed9c552fa01ff309976f4cdbbe.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9a8d77ffc4f1297b6b9982fef054ecc3.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/52be400d6c14ffa82ce15283ad33bab6.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/597e832b3e907cfa8e654e0617b303f0.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e316699e0d2f782b4e7f5fb3d25f6bc2.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f94d906a916facb5944f12d057ef733a.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d10575c6f4fc05a220ef6bf25d250e49.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e2088c1d8a7a30058bee8efb11c81030.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3fafc5bf4937514f3f026a55aa3c0b91.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ea77f6bf809f1a8ad11948dbd49db88b.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/bef8602757df295f9012499bd4f1af2d.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a42d7959c7a0e4949e8716e966d36a52.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/6eb2bcc438892289674e576e98420290.png)

#### 7.4.2 程序中断方式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/058fff852b0016e7daefbf21a94d571c.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e908dd682765ed5a6ab00d195e5aac42.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c5a3af35473867577ccff13209786daf.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/62365bab08ffa90b0a5022e96425788e.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d3457ff48cf172c25a06ea232dceb2d2.png)

#### 7.4.3 DMA方式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e0f0affa344e1011f07caff0ac9b3d7a.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e249b378c5ca6a41d41c9b2cc5f96197.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/345603990860010872ee236add5b4148.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a35737c86fc480c6c23c33c92d6c5cfe.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/af40be4cc24e1849948409a85050ce46.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b3d2d65cdab54498045ac0cd09f65327.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3c513df306fd76114d6281da65f242ed.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/49142aef99048f0644825ac55a546588.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d7bb765979a1af5529abb682af83295f.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c25208d73c343bff3cc9138cb2f66ab2.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/73e9d69f70539e7e0fab94c132c234b7.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ba03fe493e072b026b8264efe3b31149.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/dc9f164ed3582188862219a17bba9b23.png)

### 7.5 本章开头提出的问题回答

#### 1)I/O设备有哪些编址方式？各有何特点？

1)I/O设备有哪些编址方式？各有何特点？  
  
统一编址和独立编址。统一编址是在主存地址中划出一定的范围作为I/O地址，以便通过访存指令即可实现对I/O的访问，但主存的容量相应减少。独立编址是指IO地址和主存是分开的，I/O地址不占主存空间，但访存需专门的I/O指令。

#### 2)CPU响应中断应具备哪些条件？

- 2)CPU响应中断应具备哪些条件？  
      
    ①在CPU内部设置的中断屏蔽触发器必须是开放的  
    ②外设有中断请求时，中断请求触发器必须处于“1”状态，保持中断请求信号。  
    ③外设(接ロ)中断允许触发器必须为“1”，这样才能把外设中断请求送至CPU。  
    具备上述三个条件时，CPU在现行指令结束的最后一个状态周期响应中断。

### 7.6 常见问题

#### 1.中断响应优先级和中断处理优先级分别指什么？

- 1.中断响应优先级和中断处理优先级分别指什么？  
      
    中断响应优先级是由硬件排队线路或中断查询程序的查询顺序决定的，不可动态改变；而中断处理优先级可以由中断屏蔽字来改变，反映的是正在处理的中断是否比新发生的中断的处理优先级低(屏蔽位为“0”，对新中断开放)，若是，则中止正在处理的中断，转到新中断去处理，  
    处理完后再回到刚才被中止的中断继续处理。

#### 2.向量中断、中断向量、向量地址三个概念是什么关系？

- 2.向量中断、中断向量、向量地址三个概念是什么关系？  
      
    中断向量：每个中断源都有对应的处理程序，这个处理程序称为中断服务程序，其入口地址称为中断向量。所有中断的中断服务程序入口地址构成一个表，称为中断向量表；也有的机器把中断服务程序入口的跳转指令构成一张表，称为中断向量跳转表。  
    向量地址：中断向量表或中断向量跳转表中每个表项所在的内存地址或表项的索引值，称为向量地址或中断类型号。  
    向量中断：指一种识别中断源的技术或方式。识别中断源的目的是找到中断源对应的中断服务程序的入口地址的地址，即获得向量地址。

#### 3.程序中断和调用子程序有何区别？

- 3.程序中断和调用子程序有何区别？  
      
    两者的根本区别主要表现在服务时间和服务对象上不一样。  
    1)调用子程序过程发生的时间是已知的和固定的，即在主程序中的调用指令(CALL)执行时发生主程序调用子程序过程，调用指令所在位置是已知的和固定的。而中断过程发生的时间一般是随机的，CPU在执行某个主程序时收到中断源提出的中断申请，就发生中断过程，而中断申请一般由硬件电路产生，申请提出时间是随机的。也可以说，调用子程序是程序设计者事先安排的，而执行中断服务程序是由系统工作环境随机决定的  
    2)子程序完全为主程序服务，两者属于主从关系。主程序需要子程序时就去调用子程序，并把调用结果带回主程序继续执行。而中断服务程序与主程序二者一般是无关的，不存在谁为谁服务的问题，两者是平行关系。  
    3)主程序调用子程序的过程完全属于软件处理过程，不需要专门的硬件电路；而中断处理系统是一个软/硬件结合的系统，需要专门的硬件电路才能完成中断处理的过程  
    4)子程序嵌套可实现若干级，嵌套的最多级数受计算机内存开辟的堆栈大小限制；而中断嵌套级数主要由中断优先级来决定，一般优先级数不会很大。  
    从宏观上看，虽然程序中断方式克服了程序査询方式中的CPU“踏步”现象，实现了CPU与I/O并行工作，提高了CPU的资源利用率，但从微观操作分析，CPU在处理中断服务程序时，仍需暂停原程序的正常运行，尤其是当高速I/O设备或辅助存储器频繁地、成批地与主存交换信息时，需要不断打断CPU执行现行程序，而执行中断服务程序。

#### 4.IO指令和通道指令有何区别？

- 4.IO指令和通道指令有何区别？  
      
    **I/O指令是CPU指令系统的一部分**，是CPU用来控制输入/输出操作的指令，由CPU译码后执行。在具有通道结构的机器中，I/O指令不实现I/O数据传送，主要完成启、停I/O设备，査询通道和I/O设备的状态，及控制通道进行其他一些操作等。  
    **通道指令是通道本身的指令**，用来执行I/O操作，如读、写、磁带走带及磁盘找道等操作。

## 后记

完结撒花