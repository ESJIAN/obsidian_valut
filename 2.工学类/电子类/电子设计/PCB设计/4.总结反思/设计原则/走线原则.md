# 一、元件布局基本规则  



  
# **二、元件布线规则**  
1、画定布线区域距PCB板边≤1mm的区域内，以及安装孔周围1mm内，禁止布线；  
2、电源线尽可能的宽，不应低于18mil；信号线宽不应低于12mil；cpu入出线不应低于10mil（或8mil）；线间距不低于10mil；  
3、正常过孔不低于30mil；  
4、 双列直插：焊盘60mil，孔径40mil；  
1/4W电阻： 51*55mil（0805表贴）；直插时焊盘62mil，孔径42mil；  
无极电容： 51*55mil（0805表贴）；直插时焊盘50mil，孔径28mil；  
5、 注意电源线与地线应尽可能呈放射状，以及信号线不能出现回环走线。  
如何提高抗干扰能力和电磁兼容性

  
在研制带处理器的电子产品时，如何提高抗干扰能力和电磁兼容性？

1、 下面的一些系统要特别注意抗电磁干扰：

(1) 微控制器时钟频率特别高，总线周期特别快的系统。

(2) 系统含有大功率，大电流驱动电路，如产生火花的继电器，大电流开关等。

(3) 含微弱模拟信号电路以及高精度A/D变换电路的系统。

2、 为增加系统的抗电磁干扰能力采取如下措施：

(1) 选用频率低的微控制器：

选用外时钟频率低的微控制器可以有效降低噪声和提高系统的抗干扰能力。同样频率的方波和正弦波，方波中的高频成份比正弦波多得多。虽然方波的高频成份的波的幅度，比基波小，但频率越高越容易发射出成为噪声源，微控制器产生的最有影响的高频噪声大约是时钟频率的3倍。

(2) 减小信号传输中的畸变

微控制器主要采用高速CMOS技术制造。信号输入端静态输入电流在1mA左右，输入电容10PF左右，输入阻抗相当高，高速CMOS电路的输出端都有相当的带载能力，即相当大的输出值，将一个门的输出端通过一段很长线引到输入阻抗相当高的输入端，反射问题就很严重，它会引起信号畸变，增加系统噪声。当Tpd＞Tr时，就成了一个传输线问题，必须考虑信号反射，阻抗匹配等问题。

信号在印制板上的延迟时间与引线的特性阻抗有关，即与印制线路板材料的介电常数有关。可以粗略地认为，信号在印制板引线的传输速度，约为光速的1/3到1/2之间。微控制器构成的系统中常用逻辑电话元件的Tr（标准延迟时间）为3到18ns之间。

在印制线路板上，信号通过一个7W的电阻和一段25cm长的引线，线上延迟时间大致在4~20ns之间。也就是说，信号在印刷线路上的引线越短越好，最长不宜超过25cm。而且过孔数目也应尽量少，最好不多于2个。

当信号的上升时间快于信号延迟时间，就要按照快电子学处理。此时要考虑传输线的阻抗匹配，对于一块印刷线路板上的集成块之间的信号传输，要避免出现Td＞Trd的情况，印刷线路板越大系统的速度就越不能太快。

用以下结论归纳印刷线路板设计的一个规则：

信号在印刷板上传输，其延迟时间不应大于所用器件的标称延迟时间。

(3) 减小信号线间的交*干扰：

A点一个上升时间为Tr的阶跃信号通过引线AB传向B端。信号在AB线上的延迟时间是Td。在D点，由于A点信号的向前传输，到达B点后的信号反射和AB线的延迟，Td时间以后会感应出一个宽度为Tr的页脉冲信号。在C点，由于AB上信号的传输与反射，会感应出一个宽度为信号在AB线上的延迟时间的两倍，即2Td的正脉冲信号。这就是信号间的交*干扰。干扰信号的强度与C点信号的di/at有关，与线间距离有关。当两信号线不是很长时，AB上看到的实际是两个脉冲的迭加。

CMOS工艺制造的微控制由输入阻抗高，噪声高，噪声容限也很高，数字电路是迭加100~200mv噪声并不影响其工作。若图中AB线是一模拟信号，这种干扰就变为不能容忍。如印刷线路板为四层板，其中有一层是大面积的地，或双面板，信号线的反面是大面积的地时，这种信号间的交*干扰就会变小。原因是，大面积的地减小了信号线的特性阻抗，信号在D端的反射大为减小。特性阻抗与信号线到地间的介质的介电常数的平方成反比，与介质厚度的自然对数成正比。若AB线为一模拟信号，要避免数字电路信号线CD对AB的干扰，AB线下方要有大面积的地，AB线到CD线的距离要大于AB线与地距离的2~3倍。可用局部屏蔽地，在有引结的一面引线左右两侧布以地线。

(4) 减小来自电源的噪声

电源在向系统提供能源的同时，也将其噪声加到所供电的电源上。电路中微控制器的复位线，中断线，以及其它一些控制线最容易受外界噪声的干扰。电网上的强干扰通过电源进入电路，即使电池供电的系统，电池本身也有高频噪声。模拟电路中的模拟信号更经受不住来自电源的干扰。

(5) 注意印刷线板与元器件的高频特性

在高频情况下，印刷线路板上的引线，过孔，电阻、电容、接插件的分布电感与电容等不可忽略。电容的分布电感不可忽略，电感的分布电容不可忽略。电阻产生对高频信号的反射，引线的分布电容会起作用，当长度大于噪声频率相应波长的1/20时，就产生天线效应，噪声通过引线向外发射。

印刷线路板的过孔大约引起0.6pf的电容。

一个集成电路本身的封装材料引入2~6pf电容。

一个线路板上的接插件，有520nH的分布电感。一个双列直扦的24引脚集成电路扦座，引入4~18nH的分布电感。

这些小的分布参数对于这行较低频率下的微控制器系统中是可以忽略不计的；而对于高速系统必须予以特别注意。

(6) 元件布置要合理分区

元件在印刷线路板上排列的位置要充分考虑抗电磁干扰问题，原则之一是各部件之间的引线要尽量短。在布局上，要把模拟信号部分，高速数字电路部分，噪声源部分（如继电器，大电流开关等）这三部分合理地分开，使相互间的信号耦合为最小。

G 处理好接地线

印刷电路板上，电源线和地线最重要。克服电磁干扰，最主要的手段就是接地。

对于双面板，地线布置特别讲究，通过采用单点接地法，电源和地是从电源的两端接到印刷线路板上来的，电源一个接点，地一个接点。印刷线路板上，要有多个返回地线，这些都会聚到回电源的那个接点上，就是所谓单点接地。所谓模拟地、数字地、大功率器件地开分，是指布线分开，而最后都汇集到这个接地点上来。与印刷线路板以外的信号相连时，通常采用屏蔽电缆。对于高频和数字信号，屏蔽电缆两端都接地。低频模拟信号用的屏蔽电缆，一端接地为好。

对噪声和干扰非常敏感的电路或高频噪声特别严重的电路应该用金属罩屏蔽起来。

(7) 用好去耦电容。

好的高频去耦电容可以去除高到1GHZ的高频成份。陶瓷片电容或多层陶瓷电容的高频特性较好。设计印刷线路板时，每个集成电路的电源，地之间都要加一个去耦电容。去耦电容有两个作用：一方面是本集成电路的蓄能电容，提供和吸收该集成电路开门关门瞬间的充放电能；另一方面旁路掉该器件的高频噪声。数字电路中典型的去耦电容为0.1uf的去耦电容有5nH分布电感，它的并行共振频率大约在7MHz左右，也就是说对于10MHz以下的噪声有较好的去耦作用，对40MHz以上的噪声几乎不起作用。

1uf，10uf电容，并行共振频率在20MHz以上，去除高频率噪声的效果要好一些。在电源进入印刷板的地方和一个1uf或10uf的去高频电容往往是有利的，即使是用电池供电的系统也需要这种电容。

每10片左右的集成电路要加一片充放电电容，或称为蓄放电容，电容大小可选10uf。最好不用电解电容，电解电容是两层溥膜卷起来的，这种卷起来的结构在高频时表现为电感，最好使用胆电容或聚碳酸酝电容。

去耦电容值的选取并不严格，可按C=1/f计算；即10MHz取0.1uf，对微控制器构成的系统，取0.1~0.01uf之间都可以。

3、 降低噪声与电磁干扰的一些经验。

(1) 能用低速芯片就不用高速的，高速芯片用在关键地方。

(2) 可用串一个电阻的办法，降低控制电路上下沿跳变速率。

(3) 尽量为继电器等提供某种形式的阻尼。

(4) 使用满足系统要求的最低频率时钟。

(5) 时钟产生器尽量*近到用该时钟的器件。石英晶体振荡器外壳要接地。

(6) 用地线将时钟区圈起来，时钟线尽量短。

(7) I/O驱动电路尽量*近印刷板边，让其尽快离开印刷板。对进入印制板的信号要加滤波，从高噪声区来的信号也要加滤波，同时用串终端电阻的办法，减小信号反射。

(8) MCD无用端要接高，或接地，或定义成输出端，集成电路上该接电源地的端都要接，不要悬空。

(9) 闲置不用的门电路输入端不要悬空，闲置不用的运放正输入端接地，负输入端接输出端。 (10) 印制板尽量使用45折线而不用90折线布线以减小高频信号对外的发射与耦合。

(11) 印制板按频率和电流开关特性分区，噪声元件与非噪声元件要距离再远一些。

(12) 单面板和双面板用单点接电源和单点接地、电源线、地线尽量粗，经济是能承受的话用多层板以减小电源，地的容生电感。

(13) 时钟、总线、片选信号要远离I/O线和接插件。

(14) 模拟电压输入线、参考电压端要尽量远离数字电路信号线，特别是时钟。

(15) 对A/D类器件，数字部分与模拟部分宁可统一下也不要交*。

(16) 时钟线垂直于I/O线比平行I/O线干扰小，时钟元件引脚远离I/O电缆。

(17) 元件引脚尽量短，去耦电容引脚尽量短。

(18) 关键的线要尽量粗，并在两边加上保护地。高速线要短要直。

(19) 对噪声敏感的线不要与大电流，高速开关线平行。

(20) 石英晶体下面以及对噪声敏感的器件下面不要走线。

(21) 弱信号电路，低频电路周围不要形成电流环路。

(22) 任何信号都不要形成环路，如不可避免，让环路区尽量小。

(23) 每个集成电路一个去耦电容。每个电解电容边上都要加一个小的高频旁路电容。

(24) 用大容量的钽电容或聚酷电容而不用电解电容作电路充放电储能电容。使用管状电容时，外壳要接地。



# **一、PCB 电源布线**  

  

数字电路很多时候需要的电流是不连续的，所以对一些高速器件就会产生浪涌电流。

  

如果电源走线很长，则由于浪涌电流的存在进而会导致高频噪声，而此高频噪声会引入到其他信号中去。

  

而在高速电路中必然会存在寄生电感和寄生电阻以及寄生电容，因此该高频噪声最终会耦合到其他电路当中，而由于寄生电感的存在也会导致走线可以承受的最大浪涌电流的能力下降，进而导致有部分压降，有可能会使电路失能。

  

所以在数字器件前面加上旁路电容就显得尤为重要。电容越大，其在传输能量上是受限于传输速率的，所以一般会结合一个大电容和一个小电容一起，来满足全频率范围内。

  

![](https://pic4.zhimg.com/v2-9a717a8002e5d6f432dd2cbffc3195ab_1440w.jpg)

将旁路电容靠近引脚放置

  

避免热点产生：信号过孔会在电源层和底层产生 voids。

  

所以不合理的放置过孔很有可能会使电源或者地平面某些区域的电流密度增加。而这些电流密度增加的地方我们称之为热点。

  

所以，我们在设置过孔的时候要极力避免这种情况发生，以免平面被割裂，最终导致 EMC 的问题产生。

  

通常最好的避免热点的办法就是网状式的放置过孔，如此电流密度均匀，同时平面不会隔离，回流路径就不会过长，也就不会产生 EMC 的问题。

  

![](https://picx.zhimg.com/v2-99353209a5297942de009733e09730cd_1440w.jpg)

避免平面热点

  

  

# **二、PCB走线角度**

  

在布高速信号线时，信号线应尽量避免弯曲。如果不得不弯曲走线，则不要锐角或者直角走线，而是应该用钝角走线。

  

![](https://pic4.zhimg.com/v2-601b129c09647e3a434476311db5c445_1440w.jpg)

用135°代替90°

  

在布高速信号线时，我们经常通过走蛇形线来实现等长，同样的蛇形线也其是一种走线的弯曲。

  

线宽，间距，以及弯曲方式都应该做合理的选择，间距应满足 4W/1.5W 规则的。

  

![](https://picx.zhimg.com/v2-b550c7560c8c152e2af8bf7391c259e5_1440w.jpg)

在弯曲出保持最小距离和线段长度

  

  

# **三、PCB高速信号之间的距离**

  

高速信号线之间如果距离太近，很容易产生串扰。有些时候，因为布局、板框尺寸等原因，导致我们在布高速信号线之间的距离超过了我们的最低要求距离，那我们只能在靠近其瓶颈的地方尽量加大高速信号线之间的距离。其实如果空间足够容许，则尽量加大两高速信号线之间的距离。

  

![](https://pic1.zhimg.com/v2-abd3ca4bc147c19ba52348704f802f9a_1440w.jpg)

尽可能增加走线之间的间距

  

  

# **四、PCB 走线 stubs**

  

长的 stub 线就相当于一个天线，处理不当会产生很严重的 EMC 的问题。同时 stub 线也会造成反射，降低信号的完整度。

  

通常在高速信号线上面添加上拉或者下拉电阻的时候，会最容易产生 stub 线，而一般处理 stub 线的将走线可以菊花走线。

  

根据经验可知，如果 stub 线的长度大于 1/10 波长就可以当做一个天线了，此时就会成为一个问题。

  

![](https://picx.zhimg.com/v2-d2973c60750321c5949a897e099efa47_1440w.jpg)

通过菊花链路由避免存根痕迹

  

# **五、PCB走线 阻抗不连续**

  

走线的阻抗值一般取决于其线宽以及该走线与参考平面之间的距离。走线越宽，其阻抗越小。而在一些接口端子也器件的焊盘，其原理同样适用。

  

当一个接口端子的焊盘和一根高速信号线连接时，如果此时焊盘特别大，而高速信号线特别窄，大焊盘则阻抗小，而窄的走线必然是大阻抗，在这种情况下就会出现阻抗不连续，阻抗不连续就会产生信号反射。

  

所以一般为了解决这个问题，都是在接口端子或者器件的大焊盘下面放置一个禁布铜皮,同时在另外一层放置该焊盘的参考平面，进而加大阻抗，使阻抗连续。

  

![](https://pic1.zhimg.com/v2-68def4dd54bc8bee2b1823551f290120_1440w.jpg)

移除大焊盘下的地平面

  

过孔是另外一种会产生阻抗不连续的源头。为了最小化这种效应，在内层和过孔连接的不需要的铜皮应该去除。而这样的操作其实可以在设计的时候通过 CAD 工具来消除或者联系沟通 PCB 加工产假来消除不需要的铜皮，保证阻抗的连续性。

  

![](https://pic2.zhimg.com/v2-572d509ad7b99b50a6bfefb871102e03_1440w.jpg)

移除未使用的过孔焊盘

  

# **六、PCB高速差分信号**

  

高速差分信号线我们必须保证等宽、等间距来实现特定的差分阻抗值。所以在布差分信号线的时候尽量保证对称。

  

![](https://picx.zhimg.com/v2-8b919544acb4a1983f3dacda84482139_1440w.jpg)

对称布线差分对并保持信号始终平行

  

在差分线对内禁止布置过孔或者元器件，如果在差分线对内放置了过孔或者器件会产生 EMC 问题同时也会导致阻抗不连续。

  

![](https://pic1.zhimg.com/v2-2078f451b794621646fa359f0a1f314a_1440w.jpg)

不要在不同对之间放置任何组件或过孔

  

有时候，一些高速差分信号线需要串接耦合电容。该耦合电容同样需要对称布置，同时该耦合电容的封装不能过大，推荐使用 0402,0603 也可以接受，0805 以上的电容或者并排电容最好不要使用。

  

![](https://pica.zhimg.com/v2-c13261ceed64951790e13e1739ba434a_1440w.jpg)

对称放置耦合电容

  

通常，过孔会产生巨大的阻抗不连续，所以对于高速差分信号线对则尽量减少过孔，如果要使用过孔则对称布置。

  

![](https://pic2.zhimg.com/v2-c30d0bda4cbb406da75ebfcc4ad00505_1440w.jpg)

对称放置过孔

  

# **七、PCB信号线等长**

  

在一些高速信号接口，一般如总线等需要考虑其个信号线之间的到达时间以及时滞误差。

  

例如，在一组高速平行总线中的所以数据信号线其到达时间，必须保证在一定的时滞误差以内，从来来保证其建立时间和保持时间的一致性。为了满足这一需求，我们必须要考虑等长。

  

而高速差分信号线对两信号线必须保证严格的时滞，否则很有可能通讯失败。故为了满足这一要求，可以通过蛇形线来实现等长，进而满足时滞要求。

  

![](https://picx.zhimg.com/v2-8bbb32f15407465831757401dce732e9_1440w.jpg)

首选蛇形几何形状

  

蛇形线一般应该布置在失长的源头处，而不是远端。在源头处才能保证差分线的正负端的信号在大部分时间内都是同步传输的。

  

![](https://pica.zhimg.com/v2-2f2c705d2c2831336c3c5a57689f38c8_1440w.jpg)

对不匹配店家长度校正

  

走线弯曲处是产生失长的源头之一。对于走线弯曲处，其实现等长的应靠近弯曲处(<=15mm)。

  

![](https://pic3.zhimg.com/v2-57bcfbc4fe4c3af7aade95674a40c104_1440w.jpg)

靠近弯曲出放置长度补偿

  

如果有两个走线弯曲，且两者之间的距离<15mm，故此时两者的失长会互相补偿，故此时不用再做等长处理。

  

![](https://picx.zhimg.com/v2-b0915e4384f16f00f8266975b33ca48d_1440w.jpg)

弯曲可以相互补偿

  

对于不同部分的高速差分信号线，应分别独立等长。过孔，串接耦合电容以及接口端子都会是高速差分信号线分成两部分，所以这个时候要特别注意。一定要分别等长。因为很多 EDA 软件在 DRC 的时候都只关注整个走线是否失长。

  

![](https://pic2.zhimg.com/v2-34375ad4e66c11d7bfd70d32f8cd3999_1440w.jpg)

需要在每个段中补偿长度差异

  

对于如 LVDS 显示器件等接口，会同时存在数对差分对，且差分对之间的时序要求一般都会特别严格，时滞要求特别小，所以，对于此类差分信号对我们要求一般在同一平面内进行补偿。因为不同层的信号传输速度是不同的。

  

![](https://pic1.zhimg.com/v2-2d327993f2ae4a0add7f1bb46b8857d0_1440w.jpg)

同一接口内的对应该在同一层上优先路由

  

有些 EDA 软件在计算走线长度时，会将焊盘内部的走线也会计算在长度之内，如果此时进行长度补偿，最终实际结果会失长。所以此时要特别注意，在使用一些 EDA 的软件的时候。

  

![](https://pic2.zhimg.com/v2-750a9756016526063b395a6b7d7d2139_1440w.jpg)

CAD工具长度计算问题

  

在任何时候，如果可以就一定选择对称出线进而避免需要最终为了等长而进行蛇形走线。

  

![](https://pic2.zhimg.com/v2-ae6ec2f3631b2ded8c11caa1fe561dfb_1440w.jpg)

首选对称突破

  

如果空间允许，尽量在短的差分线源头处加一个小的回环来实现补偿，而不是通过蛇形线来补偿。

  

![](https://pic1.zhimg.com/v2-7316453f4974da941af2e08adf6d8774_1440w.jpg)

差分对的首选突破