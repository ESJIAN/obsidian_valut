锁存器是具有两个稳定状态的[时序逻辑电路](https://www.mrchip.cn/newsDetail/566)，即它是双稳态多谐振荡器。锁存器有一个反馈路径来保留信息。因此，锁存器可以是存储设备。只要设备处于开机状态，锁存器就可以存储一位信息。当使能启用时，锁存器会在输入更改时立即更改存储的信息，即它们是电平触发设备。当使能信号打开时，它会持续对输入进行采样。

取决于触发信号的高电平或低电平，锁存电路可以在两种状态下工作：有效 - 高电平或者有效 - 低电平。

- 在Active – High锁存电路的情况下，通常两个输入都是低电平，该电路由任一输入上的瞬时高电平触发。
- 在Active – Low锁存电路的情况下，通常两个输入都为高电平，该电路由任一输入上的瞬时低电平触发。

## 1. 主要特性

- 锁存器是时序电路中的基本构建元素。锁存器没有任何时钟信号，即它们是异步时序电路。
- 锁存器由静态门组成。
- 锁存器是一种双稳态多谐振荡器，即它有两个稳定状态并且可以在这些状态之间切换。
-  锁存器将具有来自输出的反馈路径。因此，它们使用输入信号的先前和当前状态随时改变其输出。
- 使能后，锁存器的输出会持续受到其输入的影响，即当输入改变时输出会立即改变。禁用时，锁存器的状态保持不变，即它会记住以前的值。时钟或使能信号用作控制信号。
- 锁存器不断检查所有输入，并在启用时相应地更改其输出。
## 2. 器件分类
### 2.1 SR锁存器

其实，可以使用静态门作为基本构建块来构建一个简单的锁存器，并且可以通过向NOR门电路引入反馈来构建具有两个NOR门。

带反馈的简单NOR门逻辑电路如下图所示：

![带反馈的简单NOR门逻辑电路](https://resources.mrchip.cn/storage/images/20220628/2d8fab3034808b5e79bfc7b882185f94.png "带反馈的简单NOR门逻辑电路")

这里，输入S和R都是0 (S = R = 0)。第一个或非门的输出是P = 1。这与R = 0一起被馈送到第二个或非门，因此第二个门的输出是Q = 0。由于电路处于稳定状态，P = 1，Q = 0，如果使 S = 1，则 P = 0，Q = 1，如下图所示：

![NOR SR锁存器](https://resources.mrchip.cn/storage/images/20220628/15a114a0189baab10ee1564eef82f8ac.png "NOR SR锁存器")

这也是一种稳定的状态，如果S为0，则没有变化，因为Q = 1被反馈给第一个NOR，P仍然保持为0，如下图所示。

![NOR SR锁存器](https://resources.mrchip.cn/storage/images/20220628/b42c35ea8a7241d53e43563d0116fd36.png "NOR SR锁存器")

如果R变为1，则Q变为0，这将使P变回1，如下图所示：

![NOR SR锁存器](https://resources.mrchip.cn/storage/images/20220628/ed1ba6258871e521053a19f4536997f2.png "NOR SR锁存器")

如果R为0，那么就没有变化，这样就到达了最开始的地方。

由于输出不仅取决于当前的输入，还取决于过去的输入序列，因此该电路被称为具有记忆性。如果不允许输入条件S = R = 1，则稳定状态输出始终是互补的。当S和R都等于1时，P = 0和Q = 0，这与互补条件相矛盾。因此，输入条件 S = R = 1被认为是不允许的。锁存电路总是画成交叉耦合形式，以强调栅极之间的对称性。

![NOR SR锁存器](https://resources.mrchip.cn/storage/images/20220628/c8985d8b4333a0d36ded8a44a9efbc29.png "NOR SR锁存器")

在该电路中，当S=1时，它将输出Q'设置'为 1，当输入R=1时，它将输出Q '重置'为 0。在 S = R = 1的限制下，该电路称为设置 – 复位锁存器（SR锁存器）。

![SR锁存器符号](https://resources.mrchip.cn/storage/images/20220628/81e6a4b7e2653144ecdca4ff1ad5a17f.png "SR锁存器符号")

**关于****竞态条件**

在逻辑电路中，竞态条件是指“逻辑电路的两个输入同时变化并使输出暂定的情况”。输入相互竞争以改变输出，它通常发生在将输出作为电路反馈输入的设备中。当设备尝试同时执行两个操作（即同时更改两个输入的状态）时，会出现这种情况。有几种方法可以避免条件竞争，例如使用边沿触发或使用主从[触发器](https://www.mrchip.cn/newsDetail/568)。

**SR锁存器状态表**

SR锁存器状态表（真值表）提供有关电路状态的信息，由于时序电路的输出取决于当前和先前的状态，因此这些以称为状态表的表格形式表示，并根据当前状态和其他输入显示下一个状态。

SR锁存器的状态表如下所示：

![SR锁存器的状态表](https://resources.mrchip.cn/storage/images/20220628/e51354aa0d80a59183d324cd4a5e8db7.png "SR锁存器的状态表")

### 2.2 门控SR锁存器

通常情况下，锁存器都是即时的，即当输入发生变化时，输出会立即发生变化。但对于许多应用来说，最好有一个隔离期，即使输入发生变化，输出也不会发生变化。在此期间，输出被称为真正“锁定”。这可以通过使用额外的输入（使能或时钟或门）来实现。如果使能（或时钟或门）信号未置位，则忽略输入并将输出锁存到先前的值。为了使用这个额外的信号，应该添加额外的逻辑，这些电路称为门控SR锁存器。

门控SR锁存器可以通过两种方式制成：通过将第二级与门添加到SR锁存器或通过将第二级与非门添加到反向SR锁存器。

由NOR门构成的门控SR锁存器的电路图如下所示：

![由NOR门构成的门控SR锁存器](https://resources.mrchip.cn/storage/images/20220628/f210bf90f20e6c1ee34d33eed4898ee4.png "由NOR门构成的门控SR锁存器")

由NAND门构成的门控SR锁存器的电路图如下所示：

![由NAND门构成的门控SR锁存器](https://resources.mrchip.cn/storage/images/20220628/b7b235f486496091a1a31f25eff44974.png "由NAND门构成的门控SR锁存器")

当NAND门将输入反相时，反向SR锁存器变为门控SR锁存器。当使能（或时钟）为高时，锁存器被称为启用状态，即输出响应输入。当使能（或时钟）为低电平时，锁存器被禁用并保持在该状态，直到使能启用。

门控SR锁存器的符号如下图所示：

![门控SR锁存器的符号](https://resources.mrchip.cn/storage/images/20220628/0765ce31475d18c9d16ba79b46630198.png "门控SR锁存器的符号")

门控SR锁存器的真值表如下图所示：

![门控SR锁存器的真值表](https://resources.mrchip.cn/storage/images/20220628/d61623cf23f924a82d62c29cbd29af45.png "门控SR锁存器的真值表")

### 2.3 D锁存器


- 锁存器（latch）---对脉冲电平敏感，在时钟脉冲的电平作用下改变状态 

锁存器是电平触发的存储单元，数据存储的动作取决于输入时钟（或者使能）信号的电平值，当锁存器处于使能状态时，输出才会随着数据输入发生变化。（简单地说，它有两个输入，分别是一个有效信号EN,一个输入数据信号DATA_IN，它有一个输出Q，它的功能就是在EN有效的时候把DATA_IN的值传给Q，也就是锁存的过程）;

#### 2.3.1 逻辑电路图
![Pasted image 20241027173751.png](https://www.helloimg.com/i/2024/12/09/6756a596e5e6d.png)
数据锁存器或延迟锁存器（D锁存器）是存储数据的简单锁存器之一，它也被称为透明锁存器。一个简单的D锁存器可以由两个NAND门构成。
#### 2.3.2 工作原理
![Pasted image 20241027173755.png](https://www.helloimg.com/i/2024/12/09/6756a5861f54b.png)

当S = R = 1时发生的SR锁存器中的竞态条件可以在D锁存器中避免，因为R输入被重命名为D的反转S替换。因此没有非法或禁止的输入。在 D锁存器中，Q始终为D。

#### 2.3.3 逻辑功能
![Pasted image 20241027173800.png](https://www.helloimg.com/i/2024/12/09/6756a5783c169.png)

#### 2.3.4 工作波形
![Pasted image 20241027173805.png](https://www.helloimg.com/i/2024/12/09/6756a5ce2457a.png)

#### 2.3.5 优缺点
优点：面积小、锁存器比FF快，所以用在地址锁存是很合适的，不过一定要保证所有的latch信号源的质量，锁存器在CPU设计中很常见，正是由于它的应用使得CPU的速度比外部IO部件逻辑快许多。latch完成同一个功能所需要的门较触发器要少，所以在asic中用的较多；
#### 2.3.6 实际应用
应用场合：数据有效滞后于时钟信号有效，这意味着时钟信号先到，数据信号后到。在某些运算器电路中有时采用锁存器作为数据暂存器 

#### 2.3.7 小节总结
不用锁存器的原因有二：1、锁存器容易产生毛刺，2、锁存器在ASIC设计中应该说比FF要简单，但是在FPGA的资源中，大部分器件没有锁存器这个东西，所以需要用一个逻辑门和FF来组成锁存器，这样就浪费了资源；






### 2.4 门控D锁存器
#### 2.4.1 逻辑电路图
#### 2.4.2 工作原理
#### 2.4.3 逻辑功能
#### 2.4.4 工作波形

通过修改门控SR锁存器可以轻松构建门控D锁存器。对门控SR锁存器的唯一修改是必须将R输入更改为反相S。由NOR SR锁存器形成的门控锁存器如下所示。

![门控D锁存器](https://resources.mrchip.cn/storage/images/20220628/62edbfb7b87fa1a856621e47654f2d7e.png "门控D锁存器")

当时钟或使能为高电平（逻辑 1）时，输出会锁存D输入上的任何内容。当使能或时钟为低电平（逻辑 0）时，最后一个使能高电平的D输入将是输出。

这个锁存电路永远不会遇到“竞争”情况，因为单个D输入被反转以提供给两个输入。因此，没有机会获得相同的输入条件。所以D锁存电路可以安全地用于任何电路。

门控D锁存器的符号如下所示：

![门控D锁存器的符号](https://resources.mrchip.cn/storage/images/20220628/13e2ad84407d072c84f6af883b23066c.png "门控D锁存器的符号")

与门控NOR SR锁存器类似，门控D锁存器也可以由门控NAND SR锁存器构成。门控NAND SR锁存器的门控D锁存器电路如下所示。

![门控NAND SR锁存器的门控D锁存器电路](https://resources.mrchip.cn/storage/images/20220628/08e7aad25daa2c2e7314db0bd9c40cad.png "门控NAND SR锁存器的门控D锁存器电路")

当然，可以避免使用反相器，因为可以使用与非门来获得反相值。上述电路需要进行一些修改，得到的电路如下所示：

![来自门控 NAND SR锁存器且无反相器的门控 D 锁存器](https://resources.mrchip.cn/storage/images/20220628/0b84fbb6011e1fd7110beef15edbffa2.png "来自门控 NAND SR锁存器且无反相器的门控 D 锁存器")

门控D锁存器的真值表（或状态表）如下所示：

![门控D锁存器的真值表](https://resources.mrchip.cn/storage/images/20220628/e0312b63b45e76714b4229d3c20fa9be.png "门控D锁存器的真值表")

## 3. 锁存器的应用

锁存器的应用主要包括以下几个方面：

- 它们是基本的1位存储设备。
- D锁存器通常用作异步系统中的I/O端口。
- 数据锁存器有时用于同步两相系统中以减少[晶体管](https://www.mrchip.cn/newsDetail/273)数量。

## 4. 锁存器的优点

锁存器的优点包括以下几方面内容：

- 速度更快，因为它不需要等待时钟信号，最常用于高速设计。
- 需要更少的电力。
- 基于锁存器的设计具有小芯片尺寸。
- 主要优点是“借时”。其中，如果某项操作未在规定时间内完成，则从其他操作时间借用执行该操作所需的时间。

## 5. 锁存器的缺点

锁存器的缺点包括以下几方面内容：

- 锁存器不太可预测，因为有更多机会影响竞争条件。
- 电平敏感设备，因此亚稳态的机会更大。
- 由于锁存器电路的电平敏感特性，所以分析锁存器电路很困难。

## 6. 总结

简单来说，锁存器，就是数字电路中的一种具有记忆功能的逻辑元件，可以在特定输入脉冲电平作用下改变状态。

需要注意的是，锁存器输出端的状态不会随输入端的状态变化而变化，仅在有锁存信号时输入的状态才被保存到输出，直到下一个锁存信号到来时才改变。