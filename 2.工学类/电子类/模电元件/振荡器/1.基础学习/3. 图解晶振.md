## 引言

说到“晶振”，或者晶体谐振器（Crystal resonator），你一定不陌生，很多电子产品中都有它的身影，网上随便一搜就可看到很多：

![](https://pic3.zhimg.com/v2-8930bac5df0b046ddc55fe9552673736_1440w.jpg)

图1-电子产品中的各类晶振

特别的，如果你有带电子手表的习惯，那么拆开手表，里面驱动计时的就是一颗晶振，它有着32.768KHz的振荡频率：

![动图封面](https://pica.zhimg.com/v2-74e30fc023b045b566e1e12b8a7631f6_b.jpg)

图2-电子手表中的晶振

为什么是32.768KHz这个频率？这里我们暂且不表，先来讲述一些关于晶振的基本概念。

---

## 一、晶振的压电效应

我们把晶振的外壳去除，可以看到内部是一种半透明的材质，外加两个引出的电极引脚：

![](https://pic2.zhimg.com/v2-81d2fa32c9f46cf59fb50ab8cd2a5dcf_1440w.jpg)

图3-晶振内部的石英片

这种半透明的材质叫做“石英”晶体（Quatz）。石英由硅元素（Si）和氧元素（O）构建而成，结晶时，其原子在空间上排列非常规则（白色代表Si，红色代表O）：

![动图封面](https://pic4.zhimg.com/v2-4759eee1b8c5bbe2fdaa2b3f7acda49f_b.jpg)

											图4-石英的晶体结构

由于这种空间上的特殊排列组合，在没有被挤压的时候，晶格的中心位置上正负电抵消，是0电势，但是当受到外在压力时，晶格的中心位置上的电势会偏移，从而产生电压。

**这种现象就是“压电效应”：当对压电材料施以压力时，能产生电；反过来，当给压电材料通电，能产生形变。**

譬如，我们用对石英晶体进行敲打，能用万用表测得电压的变化：

![动图封面](https://pic2.zhimg.com/v2-010e9d43627ff032cebea8795205e537_b.jpg)

										图5-石英的压电效应

可以想象，石英这种压电材料，其实质就是将机械能和电能相互转换，所以有时也被称为“换能器”（Transducer）。

特别的，每种材料都有自己的共振频率，如果施加的是交流电，电的频率和材料本身的共振频率一致，能量就会在机械能和电能最大化转换。这种共振频率取决于石英晶体的切割方式，如由石英晶体的尺寸（厚度）、形状、振动模式等因素来决定。

![](https://pic1.zhimg.com/v2-6d4ce659fc96689c16d7ca5e81d23f40_1440w.jpg)

					图6-晶振振动模式（手表里通常都是音叉式晶振，对照图2）

---

## 二、晶振的阻抗特性

晶振本身只是一种单纯的压电材料，为了电学上的计算分析，我们绘制它的等效电路：

![](https://pic4.zhimg.com/v2-e21c149162e7eb7fab408ffa347016e9_1440w.jpg)

											图7-晶振的等效电路

等效电路分为两部分：一部分是Lm、Cm、Rm构建的串联电路，这部分代表着晶振在发生形变振动时的效果，老外也将其称为晶振的运动（Motional）参数；另一部分是一个C0并联在LCR电路上，这个C0的容值比Cm要大很多，代表了两个电极引脚产生的分布或寄生电容。

这种电路组合意味着晶振有两个谐振频率，一个是由Lm、Cm、Rm串联电路形成的谐振频率Fs；另一个是Lm、Cm、Rm整体与C0并联电路形成的谐振频率Fp：

![](https://picx.zhimg.com/v2-6fd2b0e04aac8dd0d5803dfd29db1785_1440w.jpg)

图8-晶振的阻抗特性曲线（红线）

当晶振上通过的信号频率：

- 小于Fs时，电路更显容性；
- 等于Fs时，容性阻抗和感性阻抗相互抵消，电路呈现纯阻性，电路整体阻抗最小；
- 大于Fs时，电路更显感性；
- 等于Fp时，C0与Lm、Cm、Rm（显感性）形成LC并联谐振电路，电路呈现纯阻性，电路整体阻抗最大；
- 大于Fp时，电路更显容性；

我们来看一下Fs和Fp的计算公式：

![](https://pic4.zhimg.com/v2-69197ff58bc912072b28c9ee87636963_1440w.jpg)

图9-晶振串联和并联谐振频率计算

由于Lm很大（数百mH甚至更大），C0相比Cs也很大，这导致Fs和Fp是非常接近的。实际上晶振的工作频率（标称频率）就是处于Fs和Fp之间的某个频率值。

**那你说晶振看起来就是一个LC电路啊，那直接用LC来做就行了，费这么大劲搞什么压电效应这是何必呢？**

这是因为现实当中，出于成本、工艺、体积等考虑，使用LC等元器件搭建的电路，很难做到像晶振里等效Lm（电感很大）、Rm（电阻很小）的程度，而这些参数和LC电路的品质因素Q有关系：

![](https://pic1.zhimg.com/v2-3268caf9d6d603a53f1651344a3863be_1440w.jpg)

												图10-晶振的品质因素计算

晶振的Q一般能达到数千的数值，而普通LC电路的Q只有数百的数值。Q越大，选频能力越好，振荡越稳定。这就是晶振相比传统LC电路的优势。

---

## 三、晶振的振荡电路——皮尔斯振荡器（Pierce Oscillator）

说了这么多，你应该理解了，平时所谓的“晶振”，只是一种基于压电材料的元器件，而且计算上就把它当做是LC电路来分析。作为LC类被动型元器件，它可以用于滤波或者相移，但本身不是振荡器，还需要依靠额外的电路才能获得稳定振荡。这就要说到振荡器模型：


![](https://pic1.zhimg.com/v2-c5175cdd9d10b1eac4bd80caed87f380_1440w.jpg)

						图11-振荡器模型

如果连续看过本期系列文章，就知道这个模型出现过多次，晶振的角色肯定是位于反馈网络里的。根据Barkhausen（巴克豪森）准则，在振荡频率上，晶振要实现反馈信号和输入信号（热噪声）满足0相位差，起到正反馈的作用。怎么实现呢？这就说到皮尔斯振荡器了：

![](https://pica.zhimg.com/v2-cd43aca420016798f48b42646d540054_1440w.jpg)

							图12-皮尔斯振荡器（Pierce Oscillator）

上图中，线框起来的部分一般都在单片机内部实现，如STM32就是这样的，但也有例外的单片机。两个C1和C2统称为负载电容（通常为数十个pF），Rs为串联电阻，Rf为反馈电阻，运放作为反向器。

为了更好的理解皮尔斯振荡器的工作原理，我们将上述电路图改画如下：

![](https://pic4.zhimg.com/v2-1a7a3caa86498903f8e225ff884e1fdb_1440w.jpg)

					图13-皮尔斯振荡器-电路图

上图，由于运放作为反向器，对信号相位改变180°。那么，整个Rs、C1、C2、晶振构成的反馈网络的整体相移也需是180°。其中，Rs和C1构成一个RC电路，具体相移多少由两者参数而定，但RC电路相移肯定小于90°。这意味着晶振和C2上的相移必定要大于90°才行。

**回顾图7的晶振阻抗特性曲线，只有当晶振作为一个电感的时候，晶振和C2上的相移才能大于90°。也就是说，晶振的振荡频率要求在Fs和Fp之间。**

实际上，所谓的晶振“标称频率”，如4MHz、8MHz、16MHz，都是在指附加了某个负载电容情况下测得的，这点从晶振的规格书上可以看到：

![](https://pic2.zhimg.com/v2-cf703db720f155a92b28a5494eac5a3d_1440w.jpg)

图14-晶振规格书-负载电容（见图中“Load Capacitance”）

可以理解为，负载电容是晶振正常工作的一部分。

最后，我们来看一下皮尔斯振荡器的仿真电路图效果：

![动图封面](https://pic4.zhimg.com/v2-5b67add7349c37435f4d35d3d0da6ac1_b.jpg)

						图15-皮尔斯振荡器-仿真电路图效果

---

## 四、总结

今天介绍了晶振的压电效应、等效电路、以及振荡器电路。MCU晶振旁边通常要加上负载电容，因为它们是振荡器起振的一部分，而不是为了滤波。

值得注意的是，今天说的晶振通常指的是“晶体谐振器”（Crystal Resonator），它是无源的，需要借助外部振荡电路来工作。还有一种称为“晶体谐振器”（Crystal Oscillator），在它内部有芯片，包含了完整的皮尔斯振荡器电路，接上电源就能输出振荡波形了。