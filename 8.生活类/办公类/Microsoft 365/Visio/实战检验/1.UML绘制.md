> 上一次写过一篇 [UML | 类图](https://juejin.cn/post/7017014503007059998) 相关的文章，平时规范开发会用的上，或者是写什么文档，就还是需要画图，就像毕业设计就是如此。希望能够帮助到大家。
> 
> 注：本文中所用画图软件为 `Microsoft Visio` .

其他画图软件都相似。

在线的推荐大家使用 [processon](https://www.processon.com/)，我没用 visio 之前，都是在用它作图（一些原因，文档必须要我用visio做，才转向visio）。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/0a108f0c2297d4d8889f8aa714880b2a.jpeg)

### 一、概述

[时序图](https://so.csdn.net/so/search?q=%E6%97%B6%E5%BA%8F%E5%9B%BE&spm=1001.2101.3001.7020)只是一种叫法，平常我们所说的顺序图、序列图也没有错。

**时序图是基于交互的对象行为建模，是 UML 用于描述对象之间信息的交互过程的方法，是描述对象间协作关系的模型。**

时序图用于捕获系统运行中对象之间有时间顺序的交互，是由生命线和消息组成。

时序图将交互关系表示为一个二维图。纵向是时间轴，时间沿竖线向下延伸。横向轴代表了在协作中各独立对象的类元角色。类元角色用生命线表示。当对象存在时，角色用一条虚线表示，当对象的过程处于激活状态时，生命线是一个双道线。消息用从一个对象的生命线到另一个对象生命线的箭头表示。箭头以时间顺序在图中从上到下排列。

>**思考**：也就是说把涉及到的各个抽象对象（代码块、机器、人等）在不同时间点所作的事情写在同一个画布上。并且表示出其关系。

### 二、组成元素

#### 2.1、角色

这个角色可以是用户、外部系统、机器等等。

在 visio 软件中用下图表示：

![image-20211017093631479](https://i-blog.csdnimg.cn/blog_migrate/5acd00d29f421f231db2765ec348b25c.png)

#### 2.2、对象和生命线

关于对象的命名：

1. **对象名和类名**，例如：dispatcherServlet:DispatcherServlet
2. **只显示类名**，即表示它是一个匿名对象，例如：:DispatcherServlet
3. **只显示对象名不显示类名**，例如：dispatcherServlet

生命线：在时序图中表示为从对象图标向下延伸的一条虚线，表示对象存在的时间。

![image-20211017094415710](https://i-blog.csdnimg.cn/blog_migrate/79d3eaa10059bf13a9bb0cf3c7c1afa4.png)

#### 2.3、活动条

在生命线的虚线上可以用活动条来表示某种行为的开始和结束，一般用小矩形来表示。

![image-20211017095022043](https://i-blog.csdnimg.cn/blog_migrate/acb52cc663000bd4f0e6a3b1a55f57a7.png)

在 visio 软件上称之为激活。

![image-20211017095113833](https://i-blog.csdnimg.cn/blog_migrate/0031a2a8f2e284296149099f6e31d928.png)

**注**：但是在这里我需要强调的是在生命线上并非一定要用活动条来表示执行的发生，活动条的加入是的执行发生更形象化，但是在繁多复杂的时序图中，活动条也会使图示变得更加复杂难以绘制，这种情况下，倾向于不使用活动条。

#### 2.4、消息

什么是消息？

在面向对象的分析和设计中，对象的行为也被称为消息，因为对象之间的行为的交互擢用也可以看成是对象之间发送消息实现的。通常，当一个对象调用另一个对象中的行为时，即完成了一次消息传递。

时序图中关注生命线之间的通信，这些通信就是对象发送的消息。UML用生命线间带有实心箭头的实现表示消息，每条消息从发送对象指向接收对象。

例如：

![image-20211017100334902](https://i-blog.csdnimg.cn/blog_migrate/5e9ec3dc75431907a4dbc6ea052398b4.png)

另外消息中还细分为了简单消息、同步消息和异步消息。

**简单消息**：就表示控制如何从一个对象发送给另一个对象，并不包含控制的细节。

**同步消息**：意味着阻塞和等待。如：A向B 发送一个消息后，对象A 必须一直等到B执行完成后返回才能继续往下执行。这就是同步消息。

**异步消息**：就意味着是非阻塞。如：A向B发送消息后，直接可以执行下面代码，无需等待B的执行。

同步消息用实心箭头表示，异步消息用开放式箭头表示。

![image-20211017101342519](https://i-blog.csdnimg.cn/blog_migrate/946e13da4ea3f9d4948c2f6310569285.png)

自我调用消息：

![image-20211017102210926](https://i-blog.csdnimg.cn/blog_migrate/5a5cdf499a4970a551569bd605bacc01.png)

消息的返回值：

![image-20211017102340839](https://i-blog.csdnimg.cn/blog_migrate/408c9e06391b9f0c47fbe955ec21e7cf.png)

#### 2.5、交互框

UML在2.0时在时序图中加入了交互框。交互框用来解决交互执行的条件和方式，它允许在[序列图](https://so.csdn.net/so/search?q=%E5%BA%8F%E5%88%97%E5%9B%BE&spm=1001.2101.3001.7020)中直接表示逻辑组件，用于通过指定条件或子进程的应用区域，为任何生命线的任何部分定义特殊条件和子进程。组合片段共有13种，名称及含义如下：

![8BnackesskIT5WYJI6Kf](https://i-blog.csdnimg.cn/blog_migrate/4928c8a3da00a188855df202565b0709.png)

![KkHPoU1dR0AY4sLbzlc5](https://i-blog.csdnimg.cn/blog_migrate/3827b3b029fbe2cefe67f78e08141165.png)

但是我们只抽取几个常用的出来说一下，但本质上的用法是一样的。

##### 2.5.1、alt (选择片段)

简单说就是 将 if/else 在图示中表示出来了。

![image-20211017104252428](https://i-blog.csdnimg.cn/blog_migrate/023056e2879a303547aef60a18ee4635.png)

##### 2.5.2、opt

包含一个可能发生或不发生的序列；

![image-20211017104622443](https://i-blog.csdnimg.cn/blog_migrate/374fe1eae96049546348891ed0427201.png)

只要当我成绩score小于60时，老妈打我这件事情肯定会发生。

大于就不会发生。

##### 2.5.3、Loop （循环）

片段重复一定次数，可以在临界中指示片段重复的条件。

![image-20211017104914796](https://i-blog.csdnimg.cn/blog_migrate/a5d0caa7a9baeaee7968ed0fc7e42e8d.png)

##### 2.5.4、并行（Par）

![image-20211017105243776](https://i-blog.csdnimg.cn/blog_migrate/4db9dd41fcb090fd09b1f34702c98784.png)

理论就说到这里哈，我们来接着说个例子。

### 三、【实例】

下图简述了SpringMVC的执行流程，这次我们的任务就是将它转换为时序图来表示。

![image-20211017092550564](https://i-blog.csdnimg.cn/blog_migrate/c8a20459963e123e617cad9523ebba25.png)

画成时序图如下：

![image-20211017111429786](https://i-blog.csdnimg.cn/blog_migrate/15dce1aa9dd6192d5317d5c0944a9d51.png)

### 四、自言自语

个人认为画图真的很有作用，尤其是关乎我们自己设计什么东西时，画出相关图之后，思路会清晰很多。

> 今天的文章就到这里了。
> 
> 你好，我是博主`宁在春`：[主页](https://blog.csdn.net/weixin_45821811?spm=1011.2124.3001.5343)
> 
> 相关主页： [掘金主页](https://juejin.cn/user/2859142558267559)
> 
> 如若在文章中遇到疑惑，请留言或私信，或者加主页联系方式，都会尽快回复。
> 
> 如若发现文章中存在问题，望你能够指正，不胜感谢。
> 
> 如果觉得对你有所帮助的话，来个一键三连👍啦，🙇‍xdm

参考：

UML序列图总结：http://www.trufun.net/UML/UMLwendang/2016/0115/138.html
